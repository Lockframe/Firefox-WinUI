/* ========== GLOBAL ========== */

/* MICA */
* {
  --mica: transparent !important;
  --lightborder: rgba(0,0,0,.08) 
    rgba(0,0,0,.08) 
    rgba(0,0,0,.22) 
    rgba(0,0,0,.08) !important;
  --darkborder: rgba(255,255,255,.045) 
    rgba(255,255,255,.02) 
    rgba(255,255,255,.02) 
    rgba(255,255,255,.02) !important;
  --extraacrylic: url("data:image/svg+xml,%3Csvg viewBox='0 0 250 250' style='opacity: 0.08' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='10' numOctaves='3' stitchTiles='stitch '/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E") !important;
  --acrylic: url(image/accnoise256.png) !important;
  
  --commonBackground: light-dark(#fff,#2c2c2c) !important;
  --footer: light-dark(#f3f3f3, #202020) !important;
  --footerBorder: light-dark(rgba(0,0,0,.0578),rgba(0,0,0,.1)) !important;
  --textColor: light-dark(rgba(0,0,0,.89), rgb(255,255,255)) !important;
  --textInverse: light-dark(#fff,#000) !important;
  
  --accentLight: color-mix(in srgb, accentColor 90%, black) !important; /* Main */
  --accentLight2: color-mix(in srgb, var(--accentLight) 90%, transparent) !important; /* Hover */
  --accentLight3: color-mix(in srgb, var(--accentLight) 80%, transparent) !important; /* Pressed */
  --accentLight4: color-mix(in srgb, accentColor 100%, transparent) !important; /* Full saturation */

  --accentDark: color-mix(in srgb, accentColor 60%, white) !important; /* Main */
  --accentDark2: color-mix(in srgb, var(--accentDark) 90%, transparent) !important; /* Hover */
  --accentDark3: color-mix(in srgb, var(--accentDark) 80%, transparent) !important; /* Pressed */
  --accentDark4: color-mix(in srgb, accentColor 40%, white) !important; /* Extra */
  
  --accentDarkFilter: saturate(1.55) brightness(1.05) !important;
  
  --button: light-dark(rgba(255,255,255,.7),rgba(255,255,255,.0605)) !important;
  --buttonHover: light-dark(rgba(249,249,249,.5), rgba(255,255,255,.0837)) !important;
  --buttonPressed: light-dark(rgba(255,255,255,.3), rgba(255,255,255,.0326)) !important;
  --buttonShadowLight: 0 0 0 1px rgba(0,0,0,.06), 0 1px 0 rgba(0,0,0,.1) !important;
  --buttonShadowLightPressed: 0 0 0 1px rgba(0,0,0,.0578) !important;
  --buttonShadowDark: 0 0 0 1px rgba(255,255,255,.07), 0 -1px 0 rgba(255,255,255,.02) !important;
  --buttonShadowDarkPressed: 0 0 0 1px rgba(255,255,255,.0698) !important;
  --textButtonHover: light-dark(rgba(0,0,0,.0373), rgba(255,255,255,.0605)) !important;
  --textButtonPressed: light-dark(rgba(0,0,0,.0241), rgba(255,255,255,.0419)) !important;
  --textPressed: light-dark(rgba(0,0,0,.6), rgba(255,255,255,.786)) !important;
  
  --inputBarLight: 0 0 0 1px rgba(0,0,0,.0605), 0 1px 0 rgba(0,0,0,.39) !important;
  --inputBarFocusLight: 0 0 0 1px rgba(0,0,0,.0578), 0 1px 0 var(--accentLight), 0 -1px 0 var(--accentLight) inset !important;
  --inputBarDark: 0 0 0 1px rgba(255,255,255,.08), 0 1px 0 rgba(0,0,0,.46) !important;
  --inputBarFocusDark: 0 0 0 1px rgba(255,255,255,.0698), 0 1px 0 var(--accentDark), 0 -1px 0 var(--accentDark) inset !important;
  
  --genericShadowLight: 0 0 0 1px rgba(0,0,0,.06), 0 8px 16px 0 rgba(0,0,0,.14) !important;
  --genericShadowDark: 0 0 0 1px rgba(0,0,0,.2), 0 8px 16px 0 rgba(0,0,0,.26) !important;
  
  --basicBGAnimation: background-color 83ms linear, box-shadow 83ms linear, height 83ms linear !important;
  
  text-decoration: none !important;
  outline: none !important;
  --panel-border-color: none !important; /* Panel extra border removal */
}

/* Window-wide transparency */
:root {
  & tabbox#tabbrowser-tabbox,
  & #tabbrowser-tabpanels {
    background-color: light-dark(rgba(255,255,255,.45),rgba(58, 58, 58, .25)) !important;
  }
}

/* Font change */
* {
  font-family: 'Segoe UI Variable Text', 'Segoe UI', sans-serif !important;
}

/* Simple animations */
.tab-close-button,
.toolbarbutton-1 > .toolbarbutton-icon,
.toolbarbutton-1 > stack,
#TabsToolbar .toolbarbutton-1>.toolbarbutton-icon,
.toolbarbutton-1 > .toolbarbutton-icon,
.toolbarbutton-1 > .toolbarbutton-text,
.toolbarbutton-1 > .toolbarbutton-badge-stack,
:not(.panel-subview-body > toolbaritem) > .bookmark-item:not(menu, menuitem),
.urlbar-page-action,
.identity-box-button,
#tracking-protection-icon-container,
.dialog-button-box button {
  transition: var(--basicBGAnimation) !important;
}
#PersonalToolbar {
  transition: all 183ms ease-in-out !important;
}

/* Proper downloads and menu icon */
#downloads-button,
#downloads-indicator-anchor,
#appMenu-downloads-button,
#appMenu-library-downloads-button {
  list-style-image: url("winui-icons/downloads.svg") !important;
}
/* Downloads menu adjustments */
.downloadProgress {
  margin-right: -8px !important;
}
.downloadButton image {
  margin-right: 2px !important;
}
.download-state {
  margin-bottom: 4px !important;
}
#downloadsFooter {
  margin-top: -4px !important;
}

#PanelUI-menu-button,
#appMenu-more-button2,
.unified-extensions-item-menu-button {
  list-style-image: url("winui-icons/menu.svg") !important;
}

/* Center tab and URL text vertically */
@media not (-moz-bool-pref: "uc.winui.aptos") {
  .tabbrowser-tab label, .urlbar-input-box, #identity-icon-label, .searchbar-textbox {
    margin-bottom: 2px !important;
  }
}

/* active tab with semibold text */
.tabbrowser-tab[selected] label { 
  font-weight: 600 !important;
}
.tabbrowser-tab:not([selected]) label { 
  font-weight: 400 !important;
}

/* Remove autoplay button on newly opened youtube tabs */
.tab-icon-overlay[muted]:not([crashed]), .tab-icon-overlay[activemedia-blocked]:not([crashed]) {
  display: none !important;
}

/* Left and top margin between tabs and window */
:root[sizemode="normal"] #toolbar-menubar,
:root[sizemode="normal"] #toolbar-menubar[autohide="true"][inactive="true"] + toolbar{ 
  padding-top: 0px !important;
  padding-left: 9px !important;
  margin-top: -.5px !important;
}
/* Maximized version of the one above */
:root[sizemode="maximized"] #toolbar-menubar,
:root[sizemode="maximized"] #toolbar-menubar[autohide="true"][inactive="true"] + toolbar{ 
  padding-left: 9px !important;
}

/* Tab spacing */
.tabbrowser-tab{
  padding-inline: 0 !important;
  z-index: 1 !important;
}

/* URL Tooltip */
#statuspanel-label{
  border-radius: 3px !important;
  padding: 5px !important;
  margin: 0 0 4px 4px !important;
  background-image: url(image/accnoise256.png) !important;
}

/* Remove all tabs button */
#alltabs-button {
  display: none !important;
}

/* Proper tab roundness */
.tab-background {
  border-radius: 8px 8px 0 0 !important;
}
/* Bottom tab corners */
:root {
   #TabsToolbar {
    --tab-border-radius: 4px !important;
  }
}

/* Active tab bottom corners when the window is inactive */
.tab-background:is([selected], [multiselected]):-moz-window-inactive::before,
.tab-background:is([selected], [multiselected]):-moz-window-inactive::after {
  --uc-tab-corner-bg: light-dark(rgba(255,255,255,.95),rgba(255, 255, 255, .095)) !important;
}
/* Ensure they won't appear elsewhere */
.tab-background:not([selected], [multiselected]):-moz-window-inactive::before,
.tab-background:not([selected], [multiselected]):-moz-window-inactive::after,
.tab-background:not([selected], [multiselected])::before,
.tab-background:not([selected], [multiselected])::after {
  --uc-tab-corner-bg: transparent !important;
}

/* Unselected tabs are 1px smaller than selected tabs */
.tab-background:not([selected]) {
  clip-path: inset(1px round 7px 7px 0 0) !important;
}

/* Navbar height*/
#nav-bar,
#PersonalToolbar {
  height: 48px !important;
}

/* Space between tab icons and the tab titles. */
.tab-throbber:not([pinned]),
.tab-icon-pending:not([pinned]),
.tab-icon-image:not([pinned]),
.tab-sharing-icon-overlay:not([pinned]) {
  margin-inline-end: 7px !important;
  margin-inline-start: -2px !important;
  border-radius: 2px !important;
}

/* Fix tab height */
:root {
  --tab-min-height: 32px !important;

  &[uidensity=compact] {
    --tab-min-height: unset !important;
  }

  &[uidensity=touch] {
    --tab-min-height: 31px !important;
  }
}
:root[sizemode="maximized"] {
  --tab-min-height: 22px !important;
}

:root {
  & #TabsToolbar {
    --tab-min-height: 31px !important;
  }
}

/* Fix for toolbar icons pinned to the tab area */
#TabsToolbar .toolbarbutton-1 {
  margin-bottom: -1px !important;
}

/* Border below the nav bar */
#navigator-toolbox {
  border-bottom: none !important;
}

/* Changes some default values */
:root {
  --uc-titlebar-shadow: none !important;
  --uc-tab-shadow: none !important;
  --toolbarbutton-border-radius: 4px !important;
  --uc-toolbarbutton-inner-inline-padding: 8.5px !important;
  --toolbarbutton-outer-padding: 4px !important;
  --toolbarbutton-inner-padding: 8.5px !important;
}

/* New tab button */
#TabsToolbar .toolbarbutton-1>.toolbarbutton-icon,
#TabsToolbar .toolbarbutton-1>.toolbarbutton-badge-stack {
  border-radius: 3px !important;
  margin-left: 0px !important;
}
#TabsToolbar #tabs-newtab-button>.toolbarbutton-icon,
#TabsToolbar #alltabs-button>.toolbarbutton-badge-stack,
#TabsToolbar #tabbrowser-tabs[hasadjacentnewtabbutton][overflow="true"]~#new-tab-button>.toolbarbutton-icon {
  width: 30px !important;
  height: 22px !important;
  padding-inline: 8px !important;
  padding-block: 4px !important;
}

/* Tab close button */
.tab-close-button {
  border-radius: 3px !important;
  margin-right: 5px !important;
  width: 30px !important;
  height: 21px !important;
  padding-inline: 10.5px !important;
  padding-block: 6px !important;
}

/* URL breakout results */
.urlbarView-row {
  margin-right: 4px !important;
  margin-left: 4px !important;
  margin-bottom: 0px !important;
  margin-top: 6px !important;
  border-radius: 6px !important;
  background-color: transparent !important;
}
/* URL breakout results hover*/
.urlbarView-row:hover {
  border-radius: 6px !important;
}
/* URL breakout result */
.urlbarView-row:not([type="tip"], [type="dynamic"])[selected]>.urlbarView-row-inner,
.urlbarView-row-inner[selected] {
  border-radius: 6px !important;
  box-shadow: none !important;
}

/* WinUI blue border on the left of URL bar result */
.urlbarView-row[selected] .urlbarView-row-inner {
	padding-left: 6.5px !important;
	position: relative !important;
  padding-right: 18px !important;
}
.urlbarView-row[selected] .urlbarView-row-inner::before {
	content: "";
	border-radius: 16px !important;
	display: block !important;
	position: absolute !important;
	padding: 8px 1.5px !important;
	margin-right: 12px !important;
	margin-left: -6px !important;
  margin-top: 2px !important;
}
.urlbarView-row[selected] .urlbarView-no-wrap, .urlbarView-results[wrap] .urlbarView-row[selected] .urlbarView-url {
	padding-left: 8px !important;
}

/* Context menu */
meupopup {
	--uc-contextmenu-border-radius: 8px;
}
.menupopup-arrowscrollbox, panel-list, .context-menu, ul[role="menu"].menu {
	background-image: url(image/accnoise256.png) !important;
}
/* Remove inner border from context menu */
.menupopup-arrowscrollbox {
  border: none !important;
}

.subviewbutton {
  box-shadow: none !important;
}
.subviewbutton:active {
  background-color: var(--textButtonPressed) !important;
}
.subviewbutton:active * {
  opacity: .6 !important;
}

/* Right arrow */
.menu-right {
  opacity: 0 !important;
}
menu::after {
  content: "❯";
  margin-left: 8px;
  margin-top: -2px !important;
  color: var(--textPressed) !important;
  font-size: 12px !important;
}
#protections-popup-mainView .subviewbutton-nav:not(.notFound), .widget-overflow-list .subviewbutton-nav, .PanelUI-subView .subviewbutton-nav {
  &::after {
    content: "❯" !important;
    color: var(--textPressed) !important;
    opacity: 1 !important;
    font-size: 16px !important;
    margin-bottom: -4px !important;
    margin-top: -8px !important;
  }
}

/* Change profile button in settings menu */
appMenu-empty-profiles-button {
  padding-inline-end: fit-content !important;
}

tooltip {
  -moz-appearance: none !important;
  background-image: url(image/accnoise256.png) !important;
  border-radius: 0px !important;
}

/* URL bar bottom border when opened */
.urlbarView {
  border-radius: 0 0 8px 8px !important;
  background-image: url(image/accnoise256.png) !important;
}
.urlbarView-body-outer {
  margin-top: -2px !important;
  padding-top: 1px !important;
}
.urlbarView-row:first-of-type {
  margin-top: 5px !important;
}

/* URL bar customization */
#urlbar-background {
  outline: none !important;
  border: none !important;
  height: 30px !important;
  transform: translateY(1px) !important;
  border-radius: 3px !important;
  transition: none !important;
}

/* Open */
#urlbar[open]>#urlbar-background {
  border-radius: 3px 3px 8px 8px !important;
}
/* Results */
#urlbar[breakout][breakout-extend][open] {
  border-radius: 3px 3px 8px 8px !important;
}

/* Zoom percentage in the URL bar */
#urlbar-zoom-button {
  display: none !important
}

/* Search bar customization */
#searchbar {
  outline: none !important;
  border: none !important;
  height: 30px !important;
  border-radius: 3px !important;
  transition: none !important;
}
.searchbar-textbox{
  margin-left: 6px !important;
}
#searchbar:focus-within .searchbar-textbox {
  margin-left: 5.5px !important;
}

/* Set separator color */
.tabbrowser-tab:not([selected], [multiselected], :hover) {
  /* All tabs. */
  & .tab-stack::before,
  /* Last visible tab. */
  &:nth-last-child(1 of .tabbrowser-tab:not([hidden])) .tab-stack::after,
  /* Last visible pinned tab when overflowed. */
  #tabbrowser-tabs[overflow] &:nth-last-child(1 of .tabbrowser-tab[pinned]:not([hidden])) .tab-stack::after {
    border-color: color-mix(in srgb, currentColor 06%, transparent);
  }
}

/* Prevent URL bar from growing outwards when opened */
#urlbar[breakout][breakout-extend] {
  height: 30px !important;
  transform: translateY(8px) !important;
}
#urlbar[breakout][breakout-extend] > #urlbar-background {
  border-radius: 3px 3px 0px 0px !important;
  border-bottom: 1px transparent !important;
}

#urlbar[breakout][breakout-extend] > .urlbarView {
  transform: translateY(-8px) !important;
}
#urlbar[breakout][breakout-extend] > .urlbar-input-container {
  transform: translateY(-5px) !important;
}

#urlbar, #urlbar-background, .urlbar-input-container {
  animation: none !important;
}

/* Fix for drop downs that have a weird background color for each item */
menu,
menuitem {
  background-color: transparent !important;
}

/* Change pinned one tab icon */
.tabbrowser-tab[label="OneTab"] .tab-icon-image {
}
.tabbrowser-tab[label="OneTab"] .tab-icon-image {
  content: url("icons/duplicate-tab.svg") !important;
  transform:scale(94%) !important;
}

#urlbar-background, #searchbar {
  #urlbar[open] & {
    :root:not([lwtheme]) & {
      outline-color: transparent !important;
    }
  }
}

/* URL bar icons radius */
:root {
  --urlbar-icon-border-radius: 4px !important;
}

/* Bottom tab corners are transparent when tab is hovered */
.tabbrowser-tab:not([selected]):hover .tab-background {
  --uc-tab-corner-bg: transparent !important;
  --uc-tab-corner-outline: transparent !important;
}

/* Tab Preview Cards */
.tab-preview-text-container {
  padding: 12px 16px 10px 16px !important;
  background-image: url(image/accnoise256.png) !important;
}

.tab-preview-thumbnail-container canvas {
  /* Default */
  /*height: 140px !important;
  width: 280px !important;*/
  
  background-color: transparent !important;
  height: 126px !important;
  width: 264px !important;
  border-radius: 3px !important;
  margin: 0 8px !important;
}
.tab-preview-thumbnail-container {
  border: none !important;
  background-color: var(--commonBackground) !important;
  background-image: url(image/accnoise256.png) !important;
  margin-bottom: -6px !important;
}

.tab-preview-title {
  font-weight: 600 !important;
  margin-bottom: 4px !important;
}

/* Panel colors */
* {
  --arrowpanel-background: var(--commonBackground) !important;
  --arrowpanel-color: light-dark(rgba(0, 0, 0, 0.89), #fff) !important;
  --arrowpanel-border-color: light-dark(rgba(0,0,0,.125), rgba(0,0,0,.2)) !important;
  --panel-item-hover-bgcolor: var(--textButtonHover) !important;
  --panel-item-active-bgcolor: var(--textButtonPressed) !important;
  --panel-separator-color: light-dark(rgba(0,0,0,.06), rgba(255,255,255,.0605)) !important;
}

#appMenu-multiView {
  background-image: url(image/accnoise256.png) !important;
}

/* Translation pop up */
#select-translations-panel-header {
  margin-left: 12px !important;
}

#select-translations-panel-beta-icon {
  display: none !important;
}

#select-translations-panel-settings-button {
  margin-right: 8px !important;
}

/* Sidebar - Needs polishing*/
#sidebar-header {
  background-color: var(--mica) !important;
  background-color: light-dark(
    color-mix(
      in srgb, var(--mica) 30%, white 70%),
    color-mix(
      in srgb, var(--mica) 93.95%, white 6.05%)) !important;
  background: transparent !important;
  border: none !important;
}

#sidebar-box {
  background: var(--mica) !important;
  background: light-dark(
    color-mix(
      in srgb, var(--mica) 30%, white 70%),
    color-mix(
      in srgb, var(--mica) 93.95%, white 6.05%)) !important;
  background: transparent !important;
  padding: 0px !important;
  
}

/* AI provider button */
#provider {
  background-color: var(--button) !important;
  border: 1px solid !important;
  border-color: light-dark(rgba(0,0,0,.06),rgba(255,255,255,.04)) !important;
  border-top: 1px solid light-dark(rgba(0,0,0,.06),rgba(255,255,255,.06)) !important;
  border-bottom: 1px solid light-dark(rgba(0,0,0,.16), rgba(255,255,255,.04)) !important;
  margin-bottom: 8px !important;
  margin-left: 8px !important;
  margin-right: 8px !important;
  margin-bottom: 8px !important;
  border-radius: 4px !important;
  height: 33px !important;
  margin-top: 8px !important;
}

#sidebar {
  border-radius: 8px !important;
  border: 1px solid light-dark(rgba(0,0,0,.06),rgba(255,255,255,.04)) !important;
}

/* Fix space above tabs so that shadows can appear */
#tabbrowser-tabs {
  margin-top: 0 !important;
}
.tab-stack {
  margin-top: 9px !important;
}
:root[sizemode="maximized"] .tab-stack {
  margin-top: 1px !important;
}

/* Fix new tab button top margin w tab shadow fix */
#TabsToolbar .toolbarbutton-1>.toolbarbutton-icon {
  margin-top: 11px !important;
}
:root[sizemode="maximized"] #TabsToolbar .toolbarbutton-1>.toolbarbutton-icon {
  margin-top: 3px !important;
}

/* Remove tab scroll buttons */
#tabbrowser-arrowscrollbox{
  --uc-compat-scrollbutton-margin: 1px;
  --uc-scrollbutton-up-background: linear-gradient(-90deg,transparent,var(--lwt-accent-color) 35%);
  --uc-scrollbutton-down-background: linear-gradient(90deg,transparent,var(--lwt-accent-color) 35%);
}

#tabbrowser-tabs:not([movingtab]){
  --uc-scroll-visibility: hidden;
}
#tabbrowser-tabs[overflow]{
  --uc-scrollbox-base-margin: -31px;
  --uc-scrollbox-margin: calc(var(--uc-scrollbox-base-margin) + var(--tab-shadow-max-size));
}
:root[uidensity="compact"] #tabbrowser-tabs[overflow]{
  --uc-scrollbox-base-margin: -25px;
}
#tabbrowser-arrowscrollbox:not([scrolledtostart]){
  --uc-scrollbox-overflow-start-margin: -1px;
}
#scrollbutton-up ~ spacer{
  visibility: visible !important;
}
spacer[part="overflow-start-indicator"]{
  order: -1;
  margin-inline-start: var(--uc-scrollbox-overflow-start-margin,-0.5px) !important;
}
spacer[part="overflow-end-indicator"]{
  order: 2;
}

#scrollbutton-down[disabled="true"] > .toolbarbutton-icon,
#scrollbutton-up[disabled="true"] > .toolbarbutton-icon{
  opacity: 0.4;
} 
#scrollbutton-up,
#scrollbutton-down{
  position: relative;
  z-index: 1;
  visibility: var(--uc-scroll-visibility,visible);
  background-clip: border-box !important;
  background-origin: initial !important;
  background-repeat: no-repeat !important;
  opacity: 1 !important;
}
#scrollbutton-up{
  margin-inline-start: calc(0px - var(--tab-shadow-max-size,0px)) !important;
  background-image: var(--uc-scrollbutton-up-background);
}
#scrollbutton-down{
  margin-inline-end: calc(0px - var(--tab-shadow-max-size,0px)) !important;
  background-image: var(--uc-scrollbutton-down-background);
}
scrollbox[orient="horizontal"],
.scrollbox-clip{ margin-inline: var(--uc-scrollbox-margin,0px); }
.scrollbox-clip > scrollbox[orient="horizontal"]{ margin-inline: initial }

/* Need to reset some things for other scrollboxes */
.menupopup-arrowscrollbox{
  --tab-shadow-max-size: 0;
}

/* Remove permission icon in URL bar */
#identity-permission-box {
  display: none !important;
}

/* Hide tracking protection icon */
#tracking-protection-icon-container {
  display: none !important;
}

/* Remove extension page label in URL bar */
#identity-box.extensionPage #identity-icon-label {
	display: none !important;
}

/* Disable title fade on the right end of the tab */
.tabbrowser-tab {
  --tab-label-mask-size: 0 !important;
}

/* Remove cog icon from extensions flyout as it is the same from the context menu */
#unified-extensions-view .unified-extensions-item-menu-button {
  display: none !important;
}

/* private browsing indicator. */
.private-browsing-indicator-with-label {
  color: black !important;
  margin-inline: 0 8px !important;
  padding-inline: 4px 5px !important;
  background: light-dark(var(--accentLight), var(--accentDark)) !important;
  border-radius: 99px !important;
  font-weight: 400 !important;
  margin-top: 6px !important;
  height: 28px !important;
  
  & > label { /* Original label */
    display: none;
    }
    &::after { /* Custom label */
      content: "Private";
      margin-block: 0 3px;
      margin-inline: 6px 6px;
      color: var(--textInverse) !important;
  }
}

.private-browsing-indicator-icon {
  height: 22px !important;
  width: 22px !important;
}

:root[sizemode="maximized"] .private-browsing-indicator-with-label {
  margin-top: 2px !important;
}

/* Fix 2px extra padding in some areas */
#PopupAutoComplete {
  & > .autocomplete-richlistbox {
    margin-block: -2px !important;
    border-radius: 0 !important;
  }
}

/* Autologin pop up */
#PopupAutoComplete {
  margin-left: -26px !important;
  margin-top: -32px !important;

  & .autocomplete-richlistitem[originaltype="loginsFooter"] {
    height: 32px !important;
    min-height: 32px !important;
    margin-bottom: 0 !important;
  }
}

menupopup, panel {
  &::part(content) {
    border-radius: 8px;
  }
}

/* Space for panel shadows */
panel {
  --panel-shadow-margin: 24px !important;
}

#PopupSearchAutoComplete {
  --panel-border-radius: 0 0 8px 8px !important;
  --panel-border-color: transparent !important;
}

#PopupAutoComplete > richlistbox > richlistitem {
  min-height: 32px !important;
}

/* PopUp Window customization - Needs Polishing 
:root[chromehidden~="toolbar"] #PanelUI-button {
  display: none !important;
}
:root[chromehidden~="toolbar"] {
  browser {
    margin: 4px !important;
    border-radius: 8px 8px 6px 6px !important;
    border: 1px solid light-dark(rgba(0,0,0,.08), rgba(255,255,255,.02)) !important;
  }
  .browserStack {
    background-color: light-dark(#f1f5f9, #1a2126) !important;
  }
  #navigator-toolbox {
    display: none !important;
  }
  #statuspanel-label {
    margin: 0 0 8px 8px !important;
  }
} */

/* Fix URL bar margin inside of pop up windows */
:root[chromehidden~="toolbar"] #urlbar-container {
  margin-inline: 8px !important;
}

/* Ctrl F */
.findbar-textbox {
  height: 30px !important;
  border-radius: 4px !important;
  background-color: var(--button) !important;
  border: 1px solid !important;
  border-color: light-dark(rgba(0,0,0,.08), rgba(255,255,255,.02)) !important;
  border-bottom-color: light-dark(rgba(0,0,0,.22), rgba(255,255,255,.02)) !important;
  border-top-color: light-dark(rgba(0,0,0,.08), rgba(255,255,255,.045))
}
.findbar-textbox {
  :root:not([lwtheme]) & {
    box-shadow: none !important;
  }
}
.findbar-textbox:focus {
  outline: none !important;
  border-bottom: 2px solid !important;
  border-bottom-color: light-dark(var(--accentLight), var(--accentDark)) !important;
}
findbar {
  padding-bottom: 10px !important;
  padding-top: 10px !important;
  background-color: light-dark(rgb(252,252,252), rgb(44,44,44)) !important;
  background-image: url(image/accnoise256.png) !important;
}
.browserContainer > findbar {
  border-top: 1px solid light-dark(rgba(0,0,0,.06),rgba(0,0,0,.2)) !important;
}

/* Dropdowns */
menupopup#ContentSelectDropdownPopup {
  margin-left: -14px !important;
  color: var(--textColor) !important;
}

#ContentSelectDropdown > menupopup > menuitem > .menu-iconic-text {
  margin-inline-start: -16px !important;
}

/* Fix back and forward buttons hover color */
#forward-button[disabled]:hover > .toolbarbutton-icon,
#back-button[disabled]:hover > .toolbarbutton-icon{
  background-color: transparent !important;
}

/* Remove double border when using enable clear downloads JS */
#downloadsFooterButtons > toolbarseparator {
  display: none !important;
}
#clearDownloadsPanel {
  border: none !important;
}

/* Tab audio icon */
.tab-icon-overlay[soundplaying] {
  fill: #FFFFFF !important;
  border: none !important;
  background-color: transparent !important;
  background-size: 18px !important;
}
.tab-icon-overlay[muted] {
  fill: #D70022 !important;
  border: none !important;
  background-color: transparent !important;
  background-size: 18px !important;
}
.tab-icon-overlay[activemedia-blocked] {
  fill: #FFE900 !important;
  border: none !important;
  background-color: transparent !important;
  background-size: 18px !important;
}

/* Back/forward/refresh/add to favorites as listed options in context menu */
#context-navigation:not([hidden]) {
  display: flex;
  flex-direction: column !important;
  --menuitem-min-width: unset !important;
  min-width: unset !important;
  padding-bottom: 0px !important;
}
	
:is(#context-back,#context-forward,#context-reload,#context-stop,#context-bookmarkpage):after {
  content: attr(aria-label) !important;
  display: block !important;
  visibility: visible !important;
}
	
#context-navigation > .menuitem-iconic {
  -moz-box-pack: start !important; /* can not be replaced with box-pack yet */
  flex: unset !important;
  justify-content: unset !important;
}

#context-navigation :is(menu, menuitem, menucaption),
  :is(#context-back,#context-forward,#context-reload,#context-stop,#context-bookmarkpage) {
	appearance: none !important;
	min-height: unset !important;
}
#context-navigation > .menuitem-iconic[_moz-menuactive="true"]:not([disabled="true"]) > .menu-iconic-left > .menu-iconic-icon,
  #context-navigation > .menuitem-iconic[_moz-menuactive="true"][disabled="true"] > .menu-iconic-left > .menu-iconic-icon {
	background-color: unset !important;
}

/* Fix for missing window buttons when the browser isn't focused - Hacky */
.titlebar-buttonbox {
	height: 30px;
}
/* Decreases the clashing contrast between buttons - Close button does not reappear if included here - Not compatible with W10
:root:not(:-moz-window-inactive) .titlebar-restore,
:root:not(:-moz-window-inactive) .titlebar-min,
:root:not(:-moz-window-inactive) .titlebar-max {
  list-style-image: unset !important; */
}
:root[sizemode="maximized"] .titlebar-buttonbox {
  opacity: 1 !important;
  transform: translate(-2px, 0) !important;
}
:root:-moz-window-inactive .titlebar-buttonbox {
  opacity: .5 !important;
  margin-top: -1px !important;
}
:root:-moz-window-inactive[sizemode="maximized"] .titlebar-buttonbox {
  opacity: .5 !important;
  transform: translate(-2px, 0) !important;
}
.titlebar-min {
  transform: translateX(1px) !important;
}
.titlebar-close {
  padding-right: 19px !important;
  margin-right: -2px !important;
}
.titlebar-close:hover,
:root:not(:-moz-window-inactive) .titlebar-close:hover,
:root:-moz-window-inactive .titlebar-close:hover {
  background-color: #c42b1c !important;
}

/* Urlbar search mode indicator */
#urlbar-search-mode-indicator {
  height: 26px !important;
  margin-top: 1px !important;
  color: light-dark(white, black) !important;
  padding-inline: 10px 6px !important;
  border-radius: 99px !important;
  
  #urlbar[focused] > .urlbar-input-container > & {
    background-color: light-dark(var(--accentLight), var(--accentDark)) !important;
  }

  #urlbar:not([focused]) > .urlbar-input-container > & {
    background-color: light-dark(var(--accentLight), var(--accentDark)) !important;
  }
}

#urlbar[breakout][breakout-extend][open] #urlbar-search-mode-indicator {
  margin-top: 2px !important;
}

#urlbar-search-mode-indicator-close,
#searchmode-switcher-close {
  margin-left: 2px !important;
  border-radius: 99px !important;

  @media (prefers-contrast) {
    fill-opacity: 1.0;
  }

  &:hover {
    background-color: var(--urlbar-box-hover-bgcolor);

    &:active {
      background-color: rgba(0,0,0,.1) !important;
    }
  }
}

/* Tab throbber */
.tab-throbber {
  @media (prefers-reduced-motion: no-preference) {
    :root[sessionrestored] & {
      &[progress]::before {
        fill: light-dark(var(--accentLight), var(--accentDark)) !important;
      }
    }
  }
}

:root {
  --tab-loading-fill: light-dark(var(--accentLight), var(--accentDark)) !important;
}

/* Bookmarks bar */
#PersonalToolbar {
  height: 32px !important;
  padding-inline: 6px !important;
  padding-block: 0 !important;
  
  /* Fix arrow vertical position */
  & .toolbarbutton-1 {
    align-items: center !important;
  }
}
#personal-toolbar-empty-description, toolbarbutton.bookmark-item:not(.subviewbutton) {
  padding-inline: 4px !important;
  margin-block: 4px !important;
}

.bookmark-item:not(menu, menuitem):hover {
  background-color: var(--textButtonHover) !important;
}
.bookmark-item:not(menu, menuitem):active {
  background-color: var(--textButtonPressed) !important;
}

/* Dialog boxes */
dialog {
  & #titleContainer {
    & #titleText {
      font-weight: 600 !important;
    }
  }
}

#titleContainer {
  margin-left: 12px !important;
  margin-top: 13px !important;
  margin-bottom: 10px !important;
  text-transform: capitalize !important;
}

#commonDialog, #commonDialogWindow {
  background-color: var(--commonBackground) !important;
  border-radius: 8px !important;
}
.titleIcon {
  background-color: var(--commonBackground) !important;
  display: none !important;
}
.dialogBox:not(.spotlightBox) {
  outline: 1px solid rgba(117,117,117,.4) !important;
}
.dialogBox {
  min-height: calc(100% + 21px) !important;
}
#commonDialog[subdialog] description {
  margin-inline: 12px !important;
}
#infoRow {
  margin-bottom: -10px !important;
  padding-block: 12px !important;
}
#infoBody {
  min-height: 16px !important;
  transform: translateY(-10px) !important;
}
.dialog-button-box {
  background-color: var(--footer) !important;
  border-top: 1px solid var(--footerBorder) !important;
  margin-inline: -12px !important;
  margin-block-end: -16px !important;
  padding-block-start: 10px !important;
  min-width:  unset !important;
  
  margin-block-start: -12px !important;
  padding-block-start: 24px !important;
  padding-block-end: 14px !important;
  padding-inline: 14px !important;
}

#checkboxContainer {
  margin-left: 8px !important;
  margin-top: 5px !important;
  margin-bottom: 11px !important;
}

#editBookmarkHeaderSeparator {
  display: none !important;
}

.dialog-button-box button {
  margin-bottom: 10px !important;
  width: -moz-available !important;
  font-weight: normal !important;
  background-color: var(--button) !important;
  margin-inline: 8px !important;
}

.dialog-button-box button:not([dlgtype="accept"]):hover {
  background-color: light-dark(rgba(249,249,249,.5), rgba(255,255,255,.0837)) !important;
}
.dialog-button-box button[dlgtype="accept"], #customization-done-button {
  box-shadow: none !important;
  background-color: light-dark(var(--accentLight), var(--accentDark)) !important;
  color: light-dark(#fff, #000) !important;
  border: 1px solid rgba(255,255,255,.08) !important;
  border-bottom-color: light-dark(rgba(0,0,0,.4), rgba(0,0,0,.14)) !important;
  margin-left: 10px !important;
}
.dialog-button-box button[dlgtype="accept"]:hover, #customization-done-button:hover {
  background-color: light-dark(var(--accentLight2), var(--accentDark2)) !important;
}
.dialog-button-box button[dlgtype="accept"]:active, #customization-done-button:active{
  background-color: light-dark(var(--accentLight3), var(--accentDark3)) !important;
}
.dialog-button-box button[dlgtype="cancel"] {
  margin-right: 10px !important;
  margin-left: 0 !important;
}
.popup-notification-learnmore-link, .text-link {
  margin-bottom: 12px !important;
  color: light-dark(var(--accentLight), var(--accentDark)) !important;
}
.popup-notification-body :is(checkbox){
  margin-block: 8px !important;
}

/* Save bookmark panel */
#editBMPanel_namePicker {
  outline: none !important;
  border: none !important;
  border-radius: 3px !important;
  background-color: var(--button) !important;
}
#editBMPanel_namePicker:hover {
  background-color: var(--buttonHover) !important;
}
#editBMPanel_namePicker:active {
  background-color: var(--buttonPressed) !important;
}

/* In-url toolbar buttons */
.toolbarbutton-1 > .toolbarbutton-icon,
.toolbarbutton-1 > .toolbarbutton-text,
.toolbarbutton-1 > .toolbarbutton-badge-stack,
:not(.panel-subview-body > toolbaritem) > .bookmark-item:not(menu, menuitem),
.urlbar-page-action,
.identity-box-button,
#tracking-protection-icon-container,
#clearDownloadsPanel,
#downloadsHistory,
.downloadButton {
  background-color: transparent !important;
  box-shadow: none !important;
  border: none !important;
}

.toolbarbutton-1 > .toolbarbutton-icon:hover,
.toolbarbutton-1 > .toolbarbutton-text:hover,
.toolbarbutton-1 > .toolbarbutton-badge-stack:hover,
:not(.panel-subview-body > toolbaritem) > .bookmark-item:not(menu, menuitem):hover,
.urlbar-page-action:hover,
.identity-box-button:hover,
#tracking-protection-icon-container:hover,
#clearDownloadsPanel:hover,
#downloadsHistory:hover,
.downloadButton:hover {
  background-color: var(--textButtonHover) !important;
  box-shadow: none !important;
  border: none !important;
}

:is(
  .toolbarbutton-1 > .toolbarbutton-icon,
  .toolbarbutton-1 > .toolbarbutton-text,
  .toolbarbutton-1 > .toolbarbutton-badge-stack,
  :not(.panel-subview-body > toolbaritem) > .bookmark-item:not(menu, menuitem),
  .urlbar-page-action,
  .identity-box-button,
  #tracking-protection-icon-container,
  #clearDownloadsPanel,
  #downloadsHistory,
  .downloadButton
):is(:active, [open="true"]) {
  background-color: var(--textButtonPressed) !important;
  box-shadow: none !important;
  border: none !important;
}

/* Default buttons */
button, 
#editBookmarkPanelRemoveButton, 
button.popup-notification-secondary-button,
panel menulist {
  font-weight: normal !important;
  background-color: var(--button) !important;
  border-radius: 3px !important;
  border: none !important;
}
button:hover, 
#editBookmarkPanelRemoveButton:hover, 
button.popup-notification-secondary-button:hover,
panel menulist:hover {
  background-color: var(--buttonHover) !important;
  border-radius: 3px !important;
}
button:active, 
#editBookmarkPanelRemoveButton:active, 
button.popup-notification-secondary-button:active,
panel menulist:active {
  background-color: var(--buttonPressed) !important;
  border-radius: 3px !important;
}
button:active * {
  opacity: .768 !important;
}
#editBMPanel_foldersExpander {
  margin-left: 8px !important;
}

/* Accent color buttons */
#editBookmarkPanelDoneButton,
button.primary,
#appMenu-update-banner {
  box-shadow: none !important;
  background-color: light-dark(var(--accentLight), var(--accentDark)) !important;
  color: light-dark(#fff, #000) !important;
  border: 1px solid rgba(255,255,255,.08) !important;
  border-bottom-color: light-dark(rgba(0,0,0,.4), rgba(0,0,0,.14)) !important;
  border-radius: 4px !important;
  font-weight: normal !important;
}
#editBookmarkPanelDoneButton:hover,
button.primary:hover,
#appMenu-update-banner:hover {
  background-color: light-dark(var(--accentLight2), var(--accentDark2)) !important;
  box-shadow: none !important;
}
#editBookmarkPanelDoneButton:active,
button.primary:active,
#appMenu-update-banner:active {
  background-color: light-dark(var(--accentLight3), var(--accentDark3)) !important;
  box-shadow: none !important;
}
/* Update menu button icon color */
.panel-banner-item {
  &[notificationid="update-available"], &[notificationid="update-downloading"], &[notificationid="update-manual"], &[notificationid="update-other-instance"], &[notificationid="update-restart"] {
    & > .toolbarbutton-icon {
      fill: light-dark(white,black) !important;
      margin: auto !important;
    }
  }
}

/* Incorrect button margin fix */
#identity-popup-clear-sitedata-button, 
#identity-popup-security-button {
  margin-bottom: 0px !important;
}

/* Footer */
.panel-footer {
  background-color: var(--footer) !important;
  border-top: 1px solid var(--footerBorder) !important;
  margin: 4px 0 0 0 !important;
  padding-block: 15px !important;
  padding-inline: 11px !important;
}

.panel-footer button {
  width: -moz-available !important;
  margin-inline: 4px !important;
}

/* Check Box - Adapted from Firefox UWP */
checkbox {
  opacity: 1 !important;
}
checkbox > .checkbox-check, input[type="checkbox"] {
  background-color: light-dark(rgba(0,0,0,.0241),rgba(0,0,0,.1)) !important;
  border: 1px solid light-dark(rgba(0,0,0,.6), rgba(255,255,255,.6)) !important;
  background-clip: padding-box !important;
  border-radius: 4px !important;
  -moz-context-properties: fill !important;
  fill: light-dark(#fff,#000) !important;
  -moz-appearance: none !important;
  width: 20px !important;
  height: 20px !important;
  margin: 0px !important;
  box-shadow: none !important;
  transition: background-color 43ms linear !important;
}
checkbox:hover > .checkbox-check, input[type="checkbox"]:hover {
  background-color: light-dark(rgba(0,0,0,.0578),rgba(255,255,255,.0419)) !important;
}
checkbox:active > .checkbox-check, input[type="checkbox"]:active {
  background-color: light-dark(rgba(0,0,0,.0924),rgba(255,255,255,.0698)) !important;
  border-color: light-dark(rgba(0,0,0,.2169),rgba(255,255,255,.1581)) !important;
}
input[type="checkbox"]:checked, checkbox[checked="true"] > .checkbox-check {
  background: light-dark(var(--accentLight), var(--accentDark)) !important;
  border-color: light-dark(var(--accentLight), var(--accentDark)) !important;
}
input[type="checkbox"]:checked:hover, checkbox[checked="true"]:hover > .checkbox-check {
  background-color: light-dark(var(--accentLight2), var(--accentDark2)) !important;
  border-color: light-dark(var(--accentLight2), var(--accentDark2)) !important;
}
input[type="checkbox"]:checked:active, checkbox[checked="true"]:hover:active > .checkbox-check {
  background-color: light-dark(var(--accentLight3), var(--accentDark3)) !important;
  border-color: light-dark(var(--accentLight3), var(--accentDark3)) !important;
  fill: light-dark(rgba(255,255,255,.7), rgba(0,0,0,.5)) !important;
}
checkbox[checked="true"] > .checkbox-check , input[type="checkbox"]:checked {
  background-image: url("chrome://global/skin/icons/check.svg") !important;
  background-repeat: no-repeat !important;
  background-size: 12px !important;
  background-position: center center !important;
}
input[type="checkbox"] {
  margin-right: 10px !important;
}
input[type="checkbox"]:-moz-focusring {
  outline: none !important;
}
.checkbox-label-box {
  margin-left: 10px !important;
}
/* Check Box Disabled */
checkbox[disabled="true"] > .checkbox-label-box {
  color: light-dark(rgba(0,0,0,.3614), rgba(255,255,255,.3614)) !important;
}
checkbox[disabled="true"] > .checkbox-check {
  background-color: transparent !important;
  border: 1px solid light-dark(rgba(0,0,0,.2169),rgba(255,255,255,.1581)) !important;
  fill: transparent !important;
}
checkbox[disabled="true"][checked="true"] > .checkbox-check, checkbox[disabled="true"][checked="true"]:is(:hover, :hover:active) > .checkbox-check  {
  background-color: light-dark(rgba(0,0,0,.2169),rgba(255,255,255,.1581)) !important;
  border: light-dark(rgba(0,0,0,.2169),rgba(255,255,255,.1581)) !important;
  fill: light-dark(#fff,rgba(255,255,255,.53)) !important;
}

/* Toggle Switch */
input[type="checkbox"].toggle-button, input[type="checkbox"] + .slider, .protections-popup-tp-switch, .toggle-button {
  background-clip: padding-box !important;
  background-color: light-dark(rgba(0,0,0,.0241), rgba(0,0,0,.1)) !important;
  background-image: none !important;
  border: 1px solid light-dark(rgba(0,0,0,.6), rgba(255,255,255,.6)) !important;
  border-radius: 12px !important;
  padding: 9px !important;
  padding-right: 32px !important;
  width: 38px !important;
  height: 18px;
}
.protections-popup-tp-switch {
  padding: 3px !important;
  padding-right: 26px !important;
}
input[type="checkbox"].toggle-button:hover, input[type="checkbox"]:hover + .slider, .protections-popup-tp-switch:hover, .toggle-button:hover {
  background-color: light-dark(rgba(0,0,0,.0578), rgba(255,255,255,.0419)) !important;
}
input[type="checkbox"].toggle-button:active, input[type="checkbox"]:active + .slider, .protections-popup-tp-switch:active, .toggle-button:active {
  background-color: light-dark(rgba(0,0,0,.0924), rgba(255,255,255,.0698)) !important;
}
input[type="checkbox"].toggle-button:checked, input[type="checkbox"]:checked + .slider, .protections-popup-tp-switch[enabled], .toggle-button[aria-pressed="true"] {
  background: light-dark(var(--accentLight), var(--accentDark)) !important;
  border-color: transparent !important;
}
input[type="checkbox"].toggle-button:checked:hover, input[type="checkbox"]:checked:hover + .slider, .protections-popup-tp-switch[enabled]:hover, .toggle-button[aria-pressed="true"]:hover {
  background: light-dark(var(--accentLight2), var(--accentDark2)) !important;
  border-color: transparent !important;
}
input[type="checkbox"].toggle-button:checked:active, input[type="checkbox"]:checked:active + .slider, .protections-popup-tp-switch[enabled]:active, .toggle-button[aria-pressed="true"]:active {
  background-color: light-dark(var(--accentLight3), var(--accentDark3)) !important;
  border-color: transparent !important;
}
input[type="checkbox"].toggle-button::before, input + .slider::before, .protections-popup-tp-switch::before, .toggle-button::before {
  background: var(--textPressed) !important;
  height: 12px !important;
  width: 12px !important;
  outline: none !important;
  margin: 0px !important;
  transition: transform 200ms, height 83ms linear, width 83ms linear !important;
  transform: translateX(-6px) translateY(-6px) !important;
}
.protections-popup-tp-switch::before {
  transform: none !important;
}
input[type="checkbox"].toggle-button:hover::before, input:hover + .slider::before, .protections-popup-tp-switch:hover::before, .toggle-button:hover::before {
  height: 14px !important;
  width: 14px !important;
  transform: translateX(-7px) translateY(-7px) !important;
}
input[type="checkbox"].toggle-button:checked::before, input:checked + .slider::before, .protections-popup-tp-switch[enabled]::before, .toggle-button[aria-pressed="true"]::before {
  background: light-dark(white,black) !important;
  transform: translateX(-3px) translateY(-6px) !important;
}
input[type="checkbox"].toggle-button:checked:hover::before, input:hover:checked + .slider:hover::before, .protections-popup-tp-switch[enabled]:hover::before, .toggle-button[aria-pressed="true"]:hover::before {
  transform: translateX(-4px) translateY(-7px) !important;
}
.protections-popup-tp-switch[enabled]::before {
  transform: translateX(23px) !important;
}
input[type="checkbox"].toggle-button:checked:hover::before, input:hover:checked + .slider::before, .protections-popup-tp-switch[enabled]:hover::before {
  background: AccentColorText !important;
}
.slider::before {
  bottom: 0px !important;
  inset-inline-start: 0px !important;
}
input[type="checkbox"] + .slider::before {
  transform: translateX(2px) translateY(-3px) !important;
}
input[type="checkbox"]:checked + .slider::before {
  transform: translateX(27px) translateY(-3px) !important;
}

/* Radio Button */
radio {
  opacity: 1 !important;
}
input[type="radio"] {
  appearance: none !important;
  background-clip: border-box !important;
  background-color: light-dark(rgba(0,0,0,.0241), rgba(0,0,0,.1)) !important;
  border: 1px solid light-dark(rgba(0,0,0,.6), rgba(255,255,255,.6)) !important;

  outline: none !important;
  border-radius: 100% !important;
  margin-right: 5px !important;
  box-shadow: none !important;
  width: auto !important;
  height: auto !important;
  list-style: none !important;
}
input[type="radio"]:hover {
  background-color: light-dark(rgba(0,0,0,.0578), rgba(255,255,255,.0419)) !important;
  border-color: light-dark(rgba(0,0,0,.6), rgba(255,255,255,.6)) !important;
}
input[type="radio"]:hover:active {
  background-color: light-dark(rgba(0,0,0,.0924), rgba(255,255,255,.698)) !important;
  border-color: light-dark(rgba(0,0,0,.2169), rgba(255,255,255,.1581)) !important;
}
input[type="radio"]:checked {
  background-color: light-dark(var(--accentLight), var(--accentDark)) !important;
  border-color: transparent !important;
}
input[type="radio"]:checked:hover {
  background-color: light-dark(var(--accentLight2), var(--accentDark2)) !important;
  border-color: transparent !important;
}
input[type="radio"]:checked:hover:active {
  background-color: light-dark(var(--accentLight3), var(--accentDark3)) !important;
  border-color: transparent !important;
}
input[type="radio"]::before {
  display: block !important;
  content: "" !important;
  background: transparent !important;
  height: 8px !important;
  width: 8px !important;
  margin: 4px !important;
  border-radius: 100% !important;
  transition: all 43ms linear !important;
}
input[type="radio"]:hover::before {
  height: 10px !important;
  width: 10px !important;
  margin: 3px !important;
}
input[type="radio"]:hover:active::before {
  background: light-dark(#fff,#000) !important;
}
input[type="radio"]:checked::before {
  background: light-dark(#fff,#000) !important;
}
input[type="radio"]:checked:hover::before {
  background: light-dark(#fff,#000) !important;
}
input[type="radio"]:checked:hover:active::before {
  background: Alight-dark(#fff,#000) !important;
}
input[type="radio"] + span {
  position: relative !important;
  bottom: 0px !important;
}

/* Old radio buttons */
radio {
  position: relative !important;
}
radio > .radio-check {
  -moz-context-properties: fill !important;
  appearance: none !important;

  background-clip: padding-box !important;
  background-color: light-dark(rgba(0,0,0,.0241), rgba(0,0,0,.1)) !important;
  border: 1px solid light-dark(rgba(0,0,0,.6), rgba(255,255,255,.6)) !important;
  border-radius: 100% !important;

  padding: 1px !important;
  margin-right: 5px !important;
  box-shadow: none !important;
  width: 18px !important;
  height: 18px !important;
}
radio:hover > .radio-check {
  background-color: light-dark(rgba(0,0,0,.0578), rgba(255,255,255,.0419)) !important;
  border: 1px solid light-dark(rgba(0,0,0,.6), rgba(255,255,255,.6)) !important;
}
radio:hover:active > .radio-check {
  background-color: light-dark(rgba(0,0,0,.0924), rgba(255,255,255,.698)) !important;
  border: 1px solid light-dark(rgba(0,0,0,.2169), rgba(255,255,255,.1581)) !important;
}
radio[selected="true"] > .radio-check {
  fill: light-dark(#fff,#000) !important;
  background-clip: border-box !important;
  background-color: light-dark(var(--accentLight), var(--accentDark)) !important;
  border-color: transparent !important;
}
radio[selected="true"]:hover > .radio-check {
  fill: light-dark(#fff,#000) !important;
  background-color: light-dark(var(--accentLight2), var(--accentDark2)) !important;
  border-color: transparent !important;
}
radio[selected="true"]:hover:active > .radio-check {
  fill: light-dark(#fff,#000) !important;
  background-color: light-dark(var(--accentLight3), var(--accentDark3)) !important;
  border-color: transparent !important;
}

radio[selected="true"]::before {
  position: absolute !important;
  left: 5px !important;
  display: block !important;
  content: "" !important;
  background: light-dark(#fff,#000) !important;
  height: 8px !important;
  width: 8px !important;
  border-radius: 100% !important;
  transition: all 43ms linear !important;
}

/* Radio Button Disabled */
radio[disabled="true"] > .radio-label-box {
  color: light-dark(rgba(0,0,0,.2169), rgba(255,255,255,.1581)) !important;
}
radio:is([disabled="true"], [disabled="true"][selected="true"]) > .radio-check {
  background-color: light-dark(rgba(0,0,0,.2169), rgba(255,255,255,.1581)) !important;
  border: light-dark(rgba(0,0,0,.2169), rgba(255,255,255,.1581)) !important;
}
radio:is([disabled="true"], [disabled="true"][selected="true"]):is(:hover, :hover:active) > .radio-check {
  background-color: light-dark(rgba(0,0,0,.2169), rgba(255,255,255,.1581)) !important;
  border: light-dark(rgba(0,0,0,.2169), rgba(255,255,255,.1581)) !important;
}
radio > .radio-label-box {
  margin-left: 5px !important;
  outline: none !important;
}

input[type="range"] {
  -moz-appearance: none !important;
  border: none !important;
  background: light-dark(rgba(0,0,0,.44), rgba(255,255,255,.54)) !important;
  height: 2px !important;
}
input[type="range"]:hover {
  background: light-dark(rgba(0,0,0,.44), rgba(255,255,255,.54)) !important;
}
input[type="range"]::-moz-range-progress {
  background: light-dark(var(--accentLight), var(--accentDark)) !important;
  height: 2px !important;
}
input[type="range"]::-moz-range-thumb {
  background: light-dark(var(--accentLight), var(--accentDark)) !important;
  border: none !important;
  width: 20px !important;
  height: 20px !important;
  border-radius: 50% !important;
}

/* Picture in Picture */
html[windowtype="Toolkit:PictureInPicture"] { 
  border-radius: 8px !important;
}

/* Titles */
h1, h2, h3 {
  text-align: left !important;
  margin-left: 12px !important;
}

/* Toolbar button states */
.toolbarbutton-1:hover > .toolbarbutton-icon,
.toolbarbutton-1:hover > stack{
  background-color: var(--textButtonHover) !important;
}
.toolbarbutton-1:active > .toolbarbutton-icon,
.toolbarbutton-1:active > stack,
#downloads-button:active .toolbarbutton-badge-stack{
  background-color: var(--textButtonPressed) !important;
  fill: var(--textPressed) !important;
}

/* Inactive window text colors */
:root body {
  --toolbar-color: var(--textColor) !important;
  --toolbarbutton-icon-fill: var(--textColor) !important;

  &:-moz-window-inactive {
    --toolbar-color: var(--lwt-text-color-inactive, var(--lwt-text-color)) !important;
    --toolbarbutton-icon-fill:  var(--lwt-text-color-inactive, var(--lwt-text-color)) !important;
  }
  #urlbar:-moz-window-inactive * {
    color: var(--lwt-text-color-inactive, var(--lwt-text-color)) !important;
  }
}

/* Animate cog icon */
#PanelUI-menu-button:hover > .toolbarbutton-badge-stack > .toolbarbutton-icon {
  transform: rotate(-15deg) !important;
  transition: transform ease-in-out .23s !important;
}
#PanelUI-menu-button:active > .toolbarbutton-badge-stack > .toolbarbutton-icon {
  transform: rotate(360deg) !important;
  transition: transform ease-in-out .43s !important;
}
#PanelUI-menu-button > .toolbarbutton-badge-stack > .toolbarbutton-icon {
  transition: transform linear 0s !important;
}

/* Tab moving animation */
#tabbrowser-tabs[movingtab] > #tabbrowser-arrowscrollbox > .tabbrowser-tab[fadein]:not([selected]):not([multiselected]),
.tabbrowser-tab[tab-grouping],
.tabbrowser-tab[tabdrop-samewindow] {
  opacity: .6 !important;
  scale: .95 !important;
  transition: transform 200ms cubic-bezier(0, .75, .25, 1), opacity 183ms linear, scale 187ms linear !important;
}
/* Tab moving transition. */
#tabbrowser-tabs:not([movingtab]) > #tabbrowser-arrowscrollbox > .tabbrowser-tab[fadein]:not([selected]):not([multiselected]),
.tabbrowser-tab:not([tab-grouping]),
.tabbrowser-tab[tabdrop-samewindow] {
  opacity: 1 !important;
  scale: 1 !important;
  transition: transform 200ms cubic-bezier(0, .75, .25, 1), opacity 187ms linear, scale 187ms linear !important;
}

/* ============= DARK ================== */

@media (prefers-color-scheme: dark) {
  /* Active tab shadows. */
  #tabbrowser-tabs .tab-background:is([selected], [multiselected]),
  #TabsToolbar #firefox-view-button[open] > .toolbarbutton-icon {
    box-shadow: 0 0 1px 0 rgba(0,0,0,.35), 0 -1px 0 0 rgba(255,255,255,.005) inset !important;
  }

  /* Active tab */
  .tabbrowser-tab:is([selected], [multiselected]) > .tab-stack > .tab-background {
    background: rgba(58, 58, 58, .45) !important;
  }

  /* Bottom corners */
  .tab-background:is([selected], [multiselected]) {
    --uc-tab-corner-bg: rgba(58, 58, 58, .45);
    --uc-tab-corner-outline: rgba(0,0,0,.1);
  }

  /* Hovering tab */
  .tabbrowser-tab:not([selected]):hover .tab-background {
    background-color: rgba(255,255,255,.0605) !important;
  }

  /* Inactive tab text */  
  .tabbrowser-tab:not([selected]) .tab-content{
    color: var(--textPressed) !important;
  }

  /* Active tab text */
  .tabbrowser-tab[selected] .tab-content{
    color: var(--textColor) !important;
  }

  /* Color the navbar/toolbar & add shadow*/
  #nav-bar,
  #PersonalToolbar {
    background-color: rgba(58, 58, 58, .45) !important;
    box-shadow: 0 -1px 0 0 rgba(0,0,0,.1) inset !important;
  }

  :root, :root .tabbrowser-tab {
    & [brighttext], & [brighttext] .tabbrowser-tab {
      --uc-titlebar-shadow: 0 -1px 0 0 rgba(0,0,0,.1) inset;
    }
  }

  /* URL bar and search bar customization */
  #urlbar-background, #searchbar {
    background-color: rgb(255, 255, 255, .0605) !important;
    box-shadow: var(--buttonShadowDark) !important;
  }
  /* Hover */
  #urlbar:hover>#urlbar-background, #searchbar:hover {
    background-color: rgba(255,255,255,.0837) !important;
  }
  /* Open */
  #urlbar[open]>#urlbar-background, #searchbar:focus-within {
    background-color: rgb(30,30,30) !important;
    box-shadow: var(--buttonShadowDarkPressed) !important;
  }
  #searchbar:focus-within {
    box-shadow: 0 0 0 1px rgba(255,255,255,.0698), 0 -2px 0 var(--accentDark) inset !important;
    border-radius: 3px 3px 0 0 !important;
    background-color: rgb(30,30,30) !important;
    transform: translateY(1px) !important;
    height: 32px !important;
    padding-bottom: 2px !important;
  }
  #PopupSearchAutoComplete {
    --panel-background: rgb(44,44,44) !important;
    transform: translateY(1px) !important;
  }
  /* Panel shadows */
  menupopup, panel {
    --panel-shadow: var(--genericShadowDark) !important;
  }
  /* Results */
  #urlbar[breakout][breakout-extend][open] {
    background-color: rgb(30,30,30) !important;
  }
  /* URL bar bottom border when opened */
  .urlbarView {
    box-shadow: 0 2px 0 0 var(--accentDark) inset, 0 8px 16px rgba(0,0,0,.26), 0 0 0 1px rgba(0,0,0,.26) !important;
    background-color: rgb(44,44,44) !important;
  }
  /* URL breakout results */
  .urlbarView-row {
    color: var(--textColor);
    --urlbar-popup-url-color: var(--accentDark) !important;
    background-color: transparent !important;
  }
  /* URL breakout results hover*/
  .urlbarView-row:hover,
  #PopupSearchAutoComplete .autocomplete-richlistitem:hover {
    --urlbar-popup-url-color: transparent !important;
    background-color: var(--textButtonHover) !important;
  }
  /* URL breakout result */
  .urlbarView-row:not([type="tip"], [type="dynamic"])[selected]>.urlbarView-row-inner,
  .urlbarView-row-inner[selected] {
    background-color: var(--textButtonPressed) !important;
  }
  /* WinUI blue border on the left of URL bar result */
  .urlbarView-row[selected] .urlbarView-row-inner::before {
    background-color: var(--accentDark) !important;
  }
  /* Links */
  .urlbarView-url {
    color: var(--accentDark) !important;;
  }

  /* URL tooltip */
  #statuspanel-label{
    background-color: var(--commonBackground) !important;
    box-shadow: 0 4px 8px 0 rgba(0,0,0,.26) !important;
    outline: 1px solid rgba(0,0,0,.2) !important;
  }  

  /* toolbar buttons hover */
  .toolbarbutton-1:hover > .toolbarbutton-icon,
  .toolbarbutton-1:hover > stack {
    background-color: var(--textButtonHover) !important;
  }

  /* New tab hover */
  #TabsToolbar .toolbarbutton-1:hover>.toolbarbutton-icon {
    background-color: var(--textButtonHover) !important;
  }

  .tab-close-button:hover {
    background-color: var(--textButtonHover) !important;
  }

  /* Context menu */
  .menupopup-arrowscrollbox, panel-list, .context-menu, ul[role="menu"].menu {
    background-color: #2c2c2c !important;
    box-shadow: var(--genericShadowDark) !important;
    color: white !important;
    outline: none !important;
  }
  /* Hovered menu item */
  menupopup menu:hover:not([disabled=true]),
  menupopup menuitem:hover:not([disabled=true]),
  menupopup menu[_moz-menuactive]:not([disabled=true]),
  menupopup menuitem[_moz-menuactive]:not([disabled=true]) {
    background-color: rgba(255,255,255,.0605) !important;
  }
  /* Active/Clicked menu item */
  menupopup menuitem:hover:active:not([disabled=true]),
  menupopup menu:hover:active:not([disabled=true]) {
    background-color: rgba(255,255,255,.04) !important;
    color: var(--textPressed) !important;
  }
  /* Separators */
  menupopup menuseparator {
    border-top: 1px solid rgba(255,255,255,.0605) !important;
  }

  tooltip {
    background: var(--commonBackground) !important;
    border: 1px solid rgba(0,0,0,.2) !important;
  }

  /* Downloads button colors */
  #downloads-button[attention="success"]
  > .toolbarbutton-badge-stack
  > #downloads-indicator-anchor
  > #downloads-indicator-icon {
    fill: rgb(108, 203, 95) !important;
  }
  #downloads-button {
    --toolbarbutton-icon-fill-attention: rgb(108, 203, 95) !important;
  }
  #downloads-button[progress] {
    --downloads-progress-fill: var(--accentDark) !important;
  }
  /* Changes color of download progress circle but it's weird w green */
  #downloads-indicator-progress-inner{
    --toolbarbutton-icon-fill-attention: var(--accentDark) !important;
  }
  .downloadProgress::-moz-progress-bar {
    background-color: var(--accentDark) !important;
  }

  /* Tabs toolbar background color */
  * {
    --lwt-accent-color: var(--mica) !important; /* Active window color */
    --lwt-accent-color-inactive: var(--mica) !important; /* Inactive window color */
  }

  /* Colors when window is inactive */
  .tabbrowser-tab[selected]:-moz-window-inactive .tab-background,
  .tab-background:is([selected], [multiselected]):-moz-window-inactive,
  #nav-bar:-moz-window-inactive,
  #PersonalToolbar:-moz-window-inactive {
    background-color: rgba(58,58,58,.45)  !important;
    --uc-tab-corner-bg: rgba(58,58,58,.45) !important;
  }
  /* Active tab */
  .tabbrowser-tab:is([selected], [multiselected]) > .tab-stack > .tab-background:-moz-window-inactive {
    background-color: rgba(58,58,58,.6)  !important;
  }

  /* Tab Preview Cards */
  .tab-preview-text-container {
    color: rgba(255,255,255,.5) !important;
  }

  .tab-preview-title {
    color: white !important;
  }

  /* Translator buttons */
  #select-translations-panel-from,
  #select-translations-panel-to,
  #select-translations-panel-translate-full-page-button {
    border: 1px solid rgba(255,255,255,.04) !important;
    border-top: 1px solid rgba(255,255,255,.06) !important;
    background: rgba(255,255,255,.0605) !important;
  }

  #select-translations-panel-done-button-primary {
    background: var(--accentDark) !important;
    color: black !important;
    box-shadow: 0 1px 0 rgba(255,255,255,.08) inset, 0 -1px 0 rgba(0,0,0,.14) inset !important;
  }
  
  /* Default buttons */
  button,  
  #editBookmarkPanelRemoveButton,
  button.popup-notification-secondary-button,
  panel menulist {
    box-shadow: var(--buttonShadowDark) !important;
  }
  button:hover,  
  #editBookmarkPanelRemoveButton:hover,
  button.popup-notification-secondary-button:hover,
  panel menulist:hover {
    box-shadow: var(--buttonShadowDark) !important;
  }
  button:active, 
  #editBookmarkPanelRemoveButton:active,
  button.popup-notification-secondary-button:active,
  panel menulist:active {
    box-shadow: var(--buttonShadowDarkPressed) !important;
  }
  
  /* Dialog boxes */
  .dialog-button-box button:not([dlgtype="accept"]) {
    box-shadow: 0 0 0 1px rgba(255,255,255,.0605), 0 -1px 0 rgba(255,255,255,.03) !important;
  }
  .dialogBox:not(.spotlightBox) {
    box-shadow: 0 32px 64px 0 rgba(0,0,0,.37), 0 2px 21px rgba(0,0,0,.37) !important;
  }
  
  /* Save bookmark panel */
  #editBMPanel_namePicker {
    box-shadow: var(--inputBarDark) !important;
  }
  #editBMPanel_namePicker:focus-within {
    box-shadow: var(--inputBarFocusDark) !important;
  }
  
  /* Active button opacity*/
  :is(
  .toolbarbutton-1 > .toolbarbutton-icon,
  .toolbarbutton-1 > .toolbarbutton-text,
  .toolbarbutton-1 > .toolbarbutton-badge-stack,
  :not(.panel-subview-body > toolbaritem) > .bookmark-item:not(menu, menuitem),
  .urlbar-page-action,
  .identity-box-button,
  #tracking-protection-icon-container,
  panel button,
  panel menulist,
  button
  ):active > * {
    opacity: .786 !important;
  }
  
  menupopup * {
  color: #fff !important;
  }
}


/* ============= LIGHT ================== */

@media (prefers-color-scheme: light) {
  /* Active tab shadows. */
  #tabbrowser-tabs .tab-background:is([selected], [multiselected]),
  #TabsToolbar #firefox-view-button[open] > .toolbarbutton-icon {
    box-shadow: 0 0 1px 0 rgba(0,0,0,.175), 
      0 -1px 0 0 rgba(255,255,255,.3) inset !important;
  }

  /* Active tab */
  .tabbrowser-tab:is([selected], [multiselected]) > .tab-stack > .tab-background {
    background: rgba(255, 255, 255, .7) !important;
  }
  /* Fix active tab color in inactive window 133 */
  .tabbrowser-tab:is([selected], [multiselected]) > .tab-stack > .tab-background:-moz-window-inactive {
    background: rgb(253,253,253) !important;
  }

  /* Bottom corners */
  .tab-background:is([selected], [multiselected]) {
      --uc-tab-corner-bg: rgba(255, 255, 255, .7);
      --uc-tab-corner-outline: rgba(0,0,0,.0405);
  }

  /* Hovering tab */
  .tab-background {
    .tabbrowser-tab:hover &:not([selected], [multiselected]) {
      #TabsToolbar:not([brighttext]) & {
        background-color: var(--textButtonHover) !important;
      }
    }
  }

  /* Inactive tab text */  
  .tabbrowser-tab:not([selected]) .tab-content {
    color: var(--textPressed) !important;
  }
  /* Active tab text */
  .tabbrowser-tab[selected] .tab-content {
    color: var(--textColor) !important;
  }

  /* Color the navbar/toolbar & add bottom shadow*/
  #nav-bar,
  #PersonalToolbar {
    background-color: rgba(255, 255, 255, .7) !important;
    box-shadow: 0 -1px 0 0 rgba(0,0,0,.0578) inset !important;
  }

  /* Alternate way to set navbar upper shadow */
  * {
    --uc-titlebar-shadow: 0 -1px 0 0 rgba(0,0,0,.0578) inset;
  }

  /* URL bar customization */
  #urlbar-background, #searchbar {
    background-color: rgba(255,255,255,.7) !important;
    box-shadow: var(--buttonShadowLight) !important;
  }
  /* Hover */
  #urlbar:hover>#urlbar-background, #searchbar:hover {
    background-color: rgba(249,249,249,.5) !important;
  }
  /* Open */
  #urlbar[open]>#urlbar-background {
    box-shadow: var(--buttonShadowLightPressed) !important;
    background-color: rgb(252,252,252) !important;
  }
  #searchbar:focus-within {
    box-shadow: 0 0 0 1px rgba(0,0,0,.06), 0 -2px 0 var(--accentLight) inset !important;
    border-radius: 3px 3px 0 0 !important;
    background-color: rgb(252,252,252) !important;
    transform: translateY(1px) !important;
    height: 32px !important;
    padding-bottom: 2px !important;
  }
  #PopupSearchAutoComplete {
    --panel-background: rgb(252,252,252) !important;
    --panel-border-color: rgba(0,0,0,.125) !important;
    transform: translateY(1px) !important;
  }
  /* Panel shadows */
  menupopup, panel {
    --panel-shadow: var(--genericShadowLight) !important;
  }
  /* Results */
  #urlbar[breakout][breakout-extend][open] {
    border-radius: 3px 3px 8px 8px !important;
  }
  /* URL bar bottom border when opened */
  .urlbarView {
    box-shadow: 0 2px 0 0 var(--accentLight) inset, var(--genericShadowLight) !important;
    background-color: rgb(247,247,247) !important;
  }
  /* URL breakout results */
  .urlbarView-row {
    color: var(--textColor);
    --urlbar-popup-url-color: rgb(0,62,146);
    background-color: transparent !important;
  }
  /* URL breakout results hover*/
  .urlbarView-row:hover,
  #PopupSearchAutoComplete .autocomplete-richlistitem:hover {
    --urlbar-popup-url-color: rgb(0,62,146);
    background-color: var(--textButtonHover) !important;
  }
  /* URL breakout result */
  .urlbarView-row:not([type="tip"], [type="dynamic"])[selected]>.urlbarView-row-inner,
  .urlbarView-row-inner[selected] {
    background-color: var(--textButtonPressed) !important;
  }
  /* WinUI blue border on the left of URL bar result */
  .urlbarView-row[selected] .urlbarView-row-inner::before {
    background-color: var(--accentLight) !important;
  }
  /* Links */
  .urlbarView-url {
    color: var(--accentLight) !important;
  }

  /* URL tooltip */
  #statuspanel-label{
    background-color: rgb(255, 255, 255) !important;
    outline: 1px solid rgba(0,0,0,.0578) !important;
    box-shadow: 0 4px 8px 0 rgba(0,0,0,.14) !important;
    color: rgba(0,0,0,.8956) !important;
  }  

  /* toolbar buttons hover */
  .toolbarbutton-1:hover > .toolbarbutton-icon,
  .toolbarbutton-1:hover > stack {
    background-color: var(--textButtonHover) !important;
  }

  /* New tab hover */
  #TabsToolbar .toolbarbutton-1:hover>.toolbarbutton-icon {
    background-color: var(--textButtonHover) !important;
  }

  .tab-close-button:hover {
    background-color: var(--textButtonHover) !important;
  }

  /* Context menu */
  .menupopup-arrowscrollbox, panel-list, .context-menu, ul[role="menu"].menu {
    background-color: #fff !important;
    box-shadow: var(--genericShadowLight) !important;
    outline: none !important;
  }
  /* Hovered menu item */
  menupopup menu:hover:not([disabled=true]),
  menupopup menuitem:hover:not([disabled=true]),
  menupopup menu[_moz-menuactive]:hover:not([disabled=true]),
  menupopup menuitem[_moz-menuactive]:hover:not([disabled=true]) {
    background-color: var(--textButtonHover) !important;
  }
  /* Active/Clicked menu item */
  menupopup menuitem:hover:active:not([disabled=true]),
  menupopup menu:hover:active:not([disabled=true]) {
    background-color: background-color: rgba(0,0,0,.02) !important;
    color: var(--textPressed) !important;
  }
  menupopup menuitem:hover:active:not([disabled=true]) *,
  menupopup menu:hover:active:not([disabled=true]) * {
    opacity: .6 !important;
  }
  /* Separators */
  menupopup menuseparator {
    border-top: 1px solid rgba(0,0,0,.06) !important;
  }

  tooltip {
    background: var(--commonBackground) !important;
    border: 1px solid rgba(0,0,0,.2) !important;
  }

  /* Downloads button colors */
  #downloads-button[attention="success"]
      > .toolbarbutton-badge-stack
      > #downloads-indicator-anchor
      > #downloads-indicator-icon {
      fill: rgb(15, 123, 15) !important;
  }
  #downloads-button {
      --toolbarbutton-icon-fill-attention: rgb(15, 123, 15) !important;
  }
  #downloads-button[progress] {
      --downloads-progress-fill: rgb(0, 95, 184) !important;
  }
  /* Changes color of download progress circle but it's weird w green */
  #downloads-indicator-progress-inner{
    --toolbarbutton-icon-fill-attention: rgb(0, 95, 184) !important;
  }
  .downloadProgress::-moz-progress-bar {
    background-color: var(--accentLight) !important;
  }

  /* Tabs toolbar background color */
  * {
    --lwt-accent-color: rgb(218, 218, 218) !important; /* Active window color */
    --lwt-accent-color-inactive: rgb(232, 232, 232) !important; /* Inactive window color */

    --lwt-accent-color: var(--mica) !important; /* Fake Mica */
  }

  /* Colors when window is inactive */
  .tabbrowser-tab[selected]:-moz-window-inactive .tab-background {
    background-color: rgb(248, 248, 248)!important;
  }

  #nav-bar:-moz-window-inactive,
  #PersonalToolbar:-moz-window-inactive {
    background-color: rgb(248, 248, 248) !important; !important;
  }

  .tab-background:is([selected], [multiselected]):-moz-window-inactive {
      --uc-tab-corner-bg: rgb(248, 248, 248) !important;
  }

  /* Tab Preview Cards */
  .tab-preview-text-container {
    color: rgba(0,0,0,.5) !important;
  }

  .tab-preview-title {
    color: var(--textColor) !important;
  }

  /* Translator buttons */
  #select-translations-panel-from,
  #select-translations-panel-to,
  #select-translations-panel-translate-full-page-button {
    box-shadow: 0 1px 0 rgba(0,0,0,.06) inset, 0 -1px 0 rgba(0,0,0,.16) inset !important;
    background: rgba(255,255,255,.7) !important;
  }

  #select-translations-panel-done-button-primary {
    background: #005fb8 !important;
    box-shadow: 0 1px 0 rgba(255,255,255,.08) inset, 0 -1px 0 rgba(0,0,0,.4) inset !important;
  }
  
  /* Default buttons */
  button,
  #editBookmarkPanelRemoveButton,
  button.popup-notification-secondary-button,
  panel menulist{
    box-shadow: var(--buttonShadowLight) !important;
  }
  button:hover,
  #editBookmarkPanelRemoveButton:hover,
  button.popup-notification-secondary-button:hover,
  panel menulist:hover {
    box-shadow: var(--buttonShadowLight) !important;
  }
  button:active,
  #editBookmarkPanelRemoveButton:active,
  button.popup-notification-secondary-button:active,
  panel menulist:active {
    box-shadow: var(--buttonShadowLightPressed) !important;
  }
  
  /* Dialog boxes */
  .dialog-button-box button:not([dlgtype="accept"]) {
    box-shadow: 0 0 0 1px rgba(0,0,0,.06), 0 1px 0 rgba(0,0,0,.1) !important;
  }
  .dialogBox:not(.spotlightBox) {
    box-shadow: 0 32px 64px 0 rgba(0,0,0,.19), 0 2px 21px rgba(0,0,0,.15) !important;
  }
  
  /* Save bookmark panel */
  #editBMPanel_namePicker {
    box-shadow: var(--inputBarLight) !important;
  }
  #editBMPanel_namePicker:focus-within {
    box-shadow: var(--inputBarFocusLight) !important;
  }
  
  /* Active button opacity */
  :is(
  .toolbarbutton-1 > .toolbarbutton-icon,
  .toolbarbutton-1 > .toolbarbutton-text,
  .toolbarbutton-1 > .toolbarbutton-badge-stack,
  :not(.panel-subview-body > toolbaritem) > .bookmark-item:not(menu, menuitem),
  .urlbar-page-action,
  .identity-box-button,
  #tracking-protection-icon-container,
  panel button,
  panel menulist,
  button
  ):active > * {
    opacity: .6 !important;
  }
  
  menupopup * {
  color: var(--textColor) !important;
  }
}




/* ======== TWEAKS ======== */

/* Disables some conflicting Edge-frfox tweaks */
#browser {
  --uc-tweak-rounded-corners-padding: 0 !important;
  --uc-tweak-rounded-corners-radius: 0 !important;
  --uc-tweak-rounded-corners-shadow: unset !important;
  --lwt-tab-line-color: unset !important;
  background: none !important;
}

#tabbrowser-tabbox .browserStack {
  background: none !important;
}

* {
  --uc-toolbarbutton-tab-gap: 0 !important;
}

:root:not([lwtheme]),
:root[privatebrowsingmode="temporary"]:where([style*="--lwt-accent-color: rgb(28, 27, 34)"]:not([style*="--newtab-background-color-secondary: rgb(66, 65, 77)"])) {
  --lwt-tab-line-color: unset !important;
}

.tab-background {
  &::before,
  &::after {
    display: block !important;
  }
}

.tab-background[selected] {
  border: unset !important;
  outline: unset !important;
}

:root,
:root .tabbrowser-tab {
  & #TabsToolbar {
    --tab-border-radius: 4px !important;
  }
}

#tabbrowser-tabs {
  & .tabbrowser-tab,
  & #tabs-newtab-button {
    padding-top: 0 !important;
  }
}
#tabbrowser-arrowscrollbox,
#tabbrowser-arrowscrollbox > *,
#scrollbutton-up:not(.menupopup-scrollbutton),
#scrollbutton-up:not(.menupopup-scrollbutton) ~ spacer,
#scrollbutton-down:not(.menupopup-scrollbutton) {
  margin-bottom: 0 !important;
}

/* WinUI Rounded Corners - Needs polishing */
@media (-moz-bool-pref: "uc.winui.rounded-corners") {
  :root:not([inDOMFullscreen="true"], [sizemode="fullscreen"], [sizemode="maximized"]) browser {
    margin: -1px 4px 4px 4px !important;
    border-radius: 8px 8px 6px 6px !important;
    border: 1px solid light-dark(rgba(0,0,0,.08), rgba(0,0,0,.1)) !important;
  }
  :root[sizemode="maximized"] browser {
    margin: -1px 4px 4px 4px !important;
    border-radius: 8px !important;
    border: 1px solid light-dark(rgba(0,0,0,.08), rgba(0,0,0,.1)) !important;
  }
  :root {
    & tabbox#tabbrowser-tabbox,
    & #tabbrowser-tabpanels {
        background-color: light-dark(rgba(255,255,255,.45),rgba(58, 58, 58, .25)) !important;
    }

    &:not([inDOMFullscreen="true"], [sizemode="fullscreen"], [sizemode="maximized"], [chromehidden*="toolbar"], [chromehidden*="menubar"]) tabbox#tabbrowser-tabbox browser {
        border-radius: 8px;
        clip-path: circle(100%);
    }
  }
  #nav-bar,
  #PersonalToolbar {
    box-shadow: 0 -1px 0 0 rgba(0,0,0,.0) inset !important;
  }
  #statuspanel-label{
    margin: 0 0 9px 9px !important;
  }
}

/* Safari-style centered URL links unless active */
@media (-moz-bool-pref: "uc.winui.centered-url") {
  #urlbar-input {
	 position: absolute;
	 width: 50%;
	 height: 100%;
	 text-align: center !important;
	 transform: translateX(50%);
	 transition: transform 0.3s cubic-bezier(0, 0.7, 0.3, 1);
  }
  #urlbar[focused] #urlbar-input {
	 transform: translateX(0);
	 width: 100%;
	 text-align: left !important;
  }
  #urlbar[breakout][breakout-extend] #urlbar-input {
    margin-top: 1px !important;
  }
}

/* Hide tab bar with 1 tab - Needs polishing */
@media (-moz-bool-pref: "uc.winui.hide-with-1-tab") {
  :root[sizemode="normal"] #nav-bar{ --uc-window-drag-space-width: 20px }

  #titlebar{ -moz-appearance: none !important; }
  #TabsToolbar{ min-height: 0 !important; margin-top: -1px !important; }

  #tabbrowser-tabs,
  #tabbrowser-arrowscrollbox{ min-height: 0 !important; }

  .accessibility-indicator,
  .private-browsing-indicator{ 
    height: unset !important;
  }
  .accessibility-indicator > hbox{ padding-block: 0 !important }

  .tabbrowser-tab:only-of-type,
  .tabbrowser-tab[first-visible-tab="true"][last-visible-tab="true"]{
    visibility: collapse !important;
    min-height: 0 !important;
    height: 0;
  }
  /* Fix window controls not being clickable */
  :root[tabsintitlebar] #toolbar-menubar[autohide="true"][inactive]{
    transition: height 0ms steps(1) 80ms;
  }
  :where(#nav-bar){
    border-inline: var(--uc-window-drag-space-width,0) solid var(--toolbar-bgcolor);
  }

  #tabbrowser-arrowscrollbox-periphery,
  #private-browsing-indicator-with-label,
  #TabsToolbar > .titlebar-buttonbox-container{
    contain: strict;
    contain-intrinsic-height: 0;
  }
  #tabbrowser-arrowscrollbox-periphery{
    contain-intrinsic-width: 36px;
    padding-inline-end: 4px;
  }
  #private-browsing-indicator-with-label{
    contain-intrinsic-width: 116px;
  }
  #TabsToolbar > .titlebar-buttonbox-container{
    contain-intrinsic-width: var(--uc-window-control-width,138px);
    margin-bottom: 0 !important;
  }
}

/* Fix Sidebar revamp causing a weird line to appear below nav bar */
@media (-moz-bool-pref: "sidebar.revamp") {
  #tabbrowser-tabbox {
    outline: none !important;
    box-shadow: none !important;
  }
}

/* Mac-like back/forward buttons */
@media (-moz-bool-pref: "uc.winui.mac-back-forward") {
  #back-button {
    list-style-image: url("winui-icons/back-mac.svg") !important;
  }

  #forward-button {
    list-style-image: url("winui-icons/forward-mac.svg") !important;
  }
}

/* Extra highlights like MacOS */
@media (-moz-bool-pref: "uc.winui.extra-highlights") {
  @media (prefers-color-scheme: dark) {
  #tabbrowser-tabs .tab-background:is([selected], 
    [multiselected]), #TabsToolbar #firefox-view-button[open] > .toolbarbutton-icon {
    box-shadow: 0 0 1px 0 rgba(0,0,0,.35), 
      0 -1px 0 0 rgba(255,255,255,.005) inset,
      0 1px 0 rgba(255,255,255,.0605) inset !important;
    }
    .menupopup-arrowscrollbox, panel-list, .context-menu, ul[role="menu"].menu {
      background-color: rgb(33,33,33) !important;
	    box-shadow: 0 0 0 1px rgba(0,0,0,.25), 
        0 8px 16px 0 rgba(0,0,0,.26),
        0 0 0 1px rgba(255,255,255,.0605) inset,
        0 1px 0 rgba(255,255,255,.1) inset !important;
      border: none !important;
      background-image: var(--extraacrylic) !important;
      }
    .panel-viewstack {
      background-color: rgb(33,33,33) !important;
      box-shadow: 0 0 0 1px rgba(255,255,255,.0605) inset,
         0 1px 0 rgba(255,255,255,.1) inset !important;
      border-radius: 8px !important;
      background-image: var(--extraacrylic) !important;
    }
    * {
      --arrowpanel-border-color: rgba(0,0,0,.4) !important;
    }
  }

  @media (prefers-color-scheme: light) {
    #tabbrowser-tabs .tab-background:is([selected], [multiselected]),
    #TabsToolbar #firefox-view-button[open] > .toolbarbutton-icon {
      box-shadow: 0 0 1px 0 rgba(0,0,0,.175), 
        0 -1px 0 0 rgba(255,255,255,.3) inset,
        0 1px 0 rgba(255,255,255,.85) inset !important;
    }
    .menupopup-arrowscrollbox, panel-list, .context-menu, ul[role="menu"].menu {
      box-shadow: 0 0 0 1px rgba(0,0,0,.06),
        0 8px 16px 0 rgba(0,0,0,.14),
        0 1px 0 rgba(255,255,255,.85) inset !important;
      border: none !important;
      background-image: var(--extraacrylic) !important;
    }
    .panel-viewstack {
      box-shadow: 0 0 0 1px rgba(255,255,255,.7) inset,
        0 1px 0 rgba(255,255,255,.85) inset !important;
      border-radius: 8px !important;
      background-image: var(--extraacrylic) !important;
    }
  }
}

@media (-moz-bool-pref: "uc.winui.pill-urlbar") {
  #urlbar-background {
    border-radius: 99px !important;
  }
  #urlbar[breakout][breakout-extend][open],
  #urlbar[breakout][breakout-extend][open] > #urlbar-background {
    border-radius: 16px 16px 0px 0px !important;
  }
}

@media (-moz-bool-pref: "uc.winui.aptos") {
  * {
    font-family: 'Aptos', sans-serif !important;
    font-size-adjust:.5 !important;
  }
  
  .urlbar-input-box, #identity-icon-label  {
    margin-bottom: 2px !important;
  }
}

@media (-moz-bool-pref: "uc.winui.transparent-urlbar") {
  #urlbar-background {
    background-color: transparent !important;
    box-shadow: none !important;
  }
}

@media (-moz-bool-pref: "uc.winui.rounded-navbar") {
  #nav-bar,
  #PersonalToolbar {
    border-radius: 8px 8px 0 0 !important;
  }
}

@media (-moz-bool-pref: "uc.winui.floating-tabs") {
  .tab-background:not([selected]) {
    clip-path: inset(1px round 7px) !important;
  }
  
  /* Fix window controls */
  :root .titlebar-buttonbox,
  :root:-moz-window-inactive .titlebar-buttonbox {
    transform: translate(0, 10px) !important;
    margin-top: -3px !important;
  }
  
  :root[sizemode="maximized"] .titlebar-buttonbox,
  :root:-moz-window-inactive[sizemode="maximized"] .titlebar-buttonbox {
    transform: translate(-2px, 10px) !important;
    margin-top: -11px !important;
  }
  
  /* Fix alignment of private window label */
  .private-browsing-indicator-with-label {
    margin-top: 16px !important;
  }
  :root[sizemode="maximized"] .private-browsing-indicator-with-label {
    margin-top: 9px !important;
  }

  /* Tab roundness */
  .tab-background {
    border-radius: 8px !important;
  }

  /* Bottom tab corners */
  .tab-background:is([selected], [multiselected])::before,
  .tab-background:is([selected], [multiselected])::after {
    --uc-tab-corner-bg: transparent !important;
    --uc-tab-corner-outline: none !important;
  }
  
  /* Tab height */
  :root {
    --tab-min-height: 46px !important;
  }
  :root[sizemode="maximized"] {
    --tab-min-height: 36px !important;
  }

  /* New tab button */
  #TabsToolbar #tabs-newtab-button>.toolbarbutton-icon {
    margin-bottom: -4px !important;
  }
  /* Tab close button */
  .tab-close-button {
    height: 22px !important;
    padding-block: 6.5px !important;
  }
  
  /* Toolbar icons pinned to the tab area */
  #TabsToolbar .toolbarbutton-1 {
    margin-bottom: 6px !important;
  }

  /* Tab space bottom and top */
  :root[sizemode="normal"] #toolbar-menubar,
  :root[sizemode="normal"] #toolbar-menubar[autohide="true"][inactive="true"] + toolbar{
    padding-left: 7px !important;
    margin-top: -4.5px !important;
  }
  :root[sizemode="maximized"] #toolbar-menubar,
  :root[sizemode="maximized"] #toolbar-menubar[autohide="true"][inactive="true"] + toolbar{
    padding-left: 7px !important;
    margin-top: 0px !important;
  }
  #tabbrowser-arrowscrollbox,
  #tabbrowser-arrowscrollbox > * {
    margin-bottom: 3.5px !important;
    margin-top: 3px !important;
  }
  .tab-content {
    margin-bottom: 1px !important;
    margin-left: -1px !important;
  }
}

@media (-moz-bool-pref: "uc.winui.navbar-highlights") {
  @media (prefers-color-scheme: light) {
    #nav-bar,
    #PersonalToolbar {
      box-shadow: 0 -1px 0 0 rgba(0,0,0,.0578) inset,
        0 1px 0 rgba(255,255,255,.85) inset,
        0 -1px 0 rgba(0,0,0,.1) !important;
      }
    
    @media (-moz-bool-pref: "uc.winui.rounded-corners") {
      #nav-bar,
      #PersonalToolbar {
        box-shadow: 0 1px 0 rgba(255,255,255,.85) inset,
        0 -1px 0 rgba(0,0,0,.1) !important;
      }
    }
  }
  @media (prefers-color-scheme: dark) {
    #nav-bar,
    #PersonalToolbar {
      box-shadow: 0 -1px 0 0 rgba(0,0,0,.1) inset,
        0 1px 0 rgba(255,255,255,.0605) inset,
        0 -1px 0 rgba(0,0,0,.1) !important;
      }
    
    @media (-moz-bool-pref: "uc.winui.rounded-corners") {
      #nav-bar,
      #PersonalToolbar {
        box-shadow: 0 1px 0 rgba(255,255,255,.0605) inset,
        0 -1px 0 rgba(0,0,0,.1) !important;
      }
    }
  }
}

/* URL bar separators */
@media (-moz-bool-pref: "uc.winui.urlbar-extra-separators") {
  #urlbar-input {
    margin-bottom: 1px !important;
  }
  
  #urlbar[breakout][breakout-extend] #urlbar-input {
    margin-bottom: -1px !important;
  }
  
  @media (prefers-color-scheme: dark) {
    #urlbar-container {
      box-shadow: 1px 0 0 rgba(255,255,255,.0605),
        -1px 0 0 rgba(255,255,255,.0605),
        2px 0 0 rgba(0,0,0,.15),
        -2px 0 0 rgba(0,0,0,.15) !important;
    }
  }
  @media (prefers-color-scheme: light) {
    #urlbar-container {
      box-shadow: 1px 0 0 rgba(0,0,0,.1),
        -1px 0 0 rgba(0,0,0,.1),
        2px 0 0 rgba(255,255,255,.85),
        -2px 0 0 rgba(255,255,255,.85) !important;
      margin-bottom: 0px !important;
    }
    #urlbar {
      transform: translateY(0px) !important;
    }
  }
}


@media (-moz-bool-pref: "uc.winui.immersive-navbar") {
  #urlbar[breakout][breakout-extend] {
    transform: translateY(8px) !important;
  }
  #identity-box, #star-button-box, #reader-mode-button{
    margin-bottom: 0px !important;
  }
  #urlbar {
    margin-bottom: 1px !important;
  }
  
  #nav-bar,
  #PersonalToolbar {
    margin-inline: 5px !important;
    height: 49px !important;
  }
    /* Animated refresh icon */
  .toolbarbutton-animatable-box {
    transform: scale(85%) !important;
    margin-left: -2px !important;
    margin-top: -1px !important;
  }
    @media (-moz-bool-pref: "uc.winui.rounded-corners") {
    :root:not([inDOMFullscreen="true"], [sizemode="fullscreen"], [sizemode="maximized"]) browser {
      margin: 0 4px 4px 4px !important;
      border-radius: 0 0 6px 6px !important;
      border: 1px solid light-dark(rgba(0,0,0,.0605), rgba(0,0,0,.25)) !important;
      border-top: none !important;
    }
    :root[sizemode="maximized"] browser {
      margin: 0 4px 4px 4px !important;
      border-radius: 0 0 8px 8px !important;
      border: 1px solid light-dark(rgba(0,0,0,.0605), rgba(0,0,0,.25)) !important;
      border-top: none !important;
    }
    :root {   
      & tabbox#tabbrowser-tabbox,
      & #tabbrowser-tabpanels {
        background-color: transparent !important;
      }

      &:not([inDOMFullscreen="true"], [sizemode="fullscreen"], [sizemode="maximized"], [chromehidden*="toolbar"], [chromehidden*="menubar"]) tabbox#tabbrowser-tabbox browser {
          border-radius: 8px;
          clip-path: circle(100%);
      }
    }
  }
  @media (-moz-bool-pref: "uc.winui.navbar-highlights") {
  @media (prefers-color-scheme: light) {
      #nav-bar,
      #PersonalToolbar {
        box-shadow: 0 1px 0 rgba(255,255,255,.85) inset,
        1px 0 0 rgba(0,0,0,.0605), -1px 0 0 rgba(0,0,0,.0605), 0 -1px 0 rgba(0,0,0,.0605),
          0 -1px 0 rgba(0,0,0,.0805) inset !important;
      }
    }
  @media (prefers-color-scheme: dark) {
      #nav-bar,
      #PersonalToolbar {
        box-shadow: 0 1px 0 rgba(255,255,255,.0605) inset,
        1px 0 0 rgba(0,0,0,.25), -1px 0 0 rgba(0,0,0,.25), 0 -1px 0 rgba(0,0,0,.25),
          0 -2px 0 rgba(0,0,0,.1) inset, 0 -1px 0 rgba(255,255,255,.0605) inset !important;
      }
    }
  }
}

@media (-moz-bool-pref: "uc.winui.uppercase-newtab-label") {
  .tabbrowser-tab[label="Nova aba"] .tab-label {
  text-transform: uppercase !important;
  }
}

@media (-moz-bool-pref: "uc.winui.extra-acrylic") {
  #nav-bar,
  #PersonalToolbar,
  #tabbrowser-tabs .tab-background:is([selected], [multiselected]){
    background-image: var(--extraacrylic), var(--acrylic) !important;
    background-repeat: repeat !important;
  }
}

@media (-moz-bool-pref: "uc.winui.taller-urlbar") {
  #urlbar-background {
    height: 34px !important;
    margin-top: -2px !important;
  }
}

@media (-moz-bool-pref: "uc.winui.more-acrylic") {
  #nav-bar,
  #PersonalToolbar,
  #tabbrowser-tabs .tab-background:is([selected], [multiselected]){
    background-image: var(--acrylic) !important;
    background-repeat: repeat !important;
  }
}

@media (-moz-bool-pref: "uc.winui.grayer-tabbed") {
  @media (prefers-color-scheme: dark) {
    #tabbrowser-tabbox:not(:-moz-window-inactive),
    #navigator-toolbox:not(:-moz-window-inactive) {
      background-image: linear-gradient(to bottom, 
        rgba(127.5,127.5,127.5,.1), 
        rgba(127.5,127.5,127.5,.1)) !important;
    }
  }
}

@media (-moz-bool-pref: "uc.winui.smaller-toolbar-buttons") {
  #star-button,
  #star-button-box,
  #identity-box,
  #reader-mode-button{
    transform: scale(.9,.9) !important;
  }

  #urlbar[breakout][breakout-extend][open] #identity-icon-box,
  #urlbar[breakout][breakout-extend][open] #star-button-box {
    margin-bottom: -2px !important;
  }
  
  .toolbarbutton-1 image{
    scale: .85 !important;
  }
  
  .toolbarbutton-1 {
    margin-inline: -1px !important;
  }
  #unified-extensions-button {
    margin-right: 0 !important;
  }
  #downloads-button, #PanelUI-button {
    margin-right: 1px !important;
  }
  /* Fix URL bar margin */
  #urlbar-container{
    margin-inline: 5px !important;
  }

  /* They move around but I haven't found a way to fix this yet */
  #reload-button > .toolbarbutton-animatable-box > .toolbarbutton-animatable-image,
  #stop-button > .toolbarbutton-animatable-box > .toolbarbutton-animatable-image,
  .toolbarbutton-animatable-box image {
    scale: 1 !important;
  }

  /* Enlarge button margins without moving anything - Hacky */
  .toolbarbutton-1:hover:not([disabled="true"], #downloads-button, #PanelUI-menu-button) image:not(menuitem *) {
    box-shadow: 0 -.5px 0 2px var(--textButtonHover) !important;
    transition: box-shadow 0s linear !important;
  }
  .toolbarbutton-1:active:not([disabled="true"], #downloads-button, #PanelUI-menu-button, :hover) image:not(menuitem *) {
    box-shadow: 0 -.5px 0 2px var(--textButtonPressed) !important;
    transition: box-shadow 0s linear !important;
  }
  
  #nav-bar .toolbarbutton-1 > .toolbarbutton-badge-stack {
    padding: 8px !important;
  }
}

@media (-moz-bool-pref: "uc.winui.extra-animations") {
  /* Simple animations extras */
  panel button,
  panel menulist,
  toolbarbutton,
  menupopup menu:hover:not([disabled=true]),
  menupopup menuitem:hover:not([disabled=true]),
  menupopup menu[_moz-menuactive]:not([disabled=true]),
  menupopup menuitem[_moz-menuactive]:not([disabled=true]),
  menupopup menu:not([disabled=true]),
  menupopup menuitem:not([disabled=true]),
  #urlbar-background,
  #searchbar,
  .download-state {
    transition: var(--basicBGAnimation) !important;
  }

  #urlbar[breakout][breakout-extend][open],
  #urlbar[open]>#urlbar-background {
    transition: none !important;
  }
  
  /* active tab text */
  .tabbrowser-tab[selected] label, .tabbrowser-tab:not([selected]) label { 
    transition: font-weight 83ms ease-in-out !important;
  }
  
  /* New tab button and close tab button click animations */
  #TabsToolbar .toolbarbutton-1:active>.toolbarbutton-icon {
    opacity: 60% !important;
  }
  .tabbrowser-tab .tab-close-button:active{
    width: 28px !important;
    height: 20px !important;
    opacity: 60% !important;
  }
  #TabsToolbar #tabs-newtab-button:active>.toolbarbutton-icon {
    padding-inline: 10px !important;
    padding-block: 6px !important;
    transition: all 83ms cubic-bezier(0.165, 0.84, 0.44, 1) !important;
  }
  #TabsToolbar #tabs-newtab-button>.toolbarbutton-icon {
    transition: all 83ms cubic-bezier(0.165, 0.84, 0.44, 1) !important;
  }

  /* Tab click animation */
  .tabbrowser-tab:active .tab-content {
    opacity: 40% !important;
    transform: scale(96%) !important;
  }
  .tabbrowser-tab .tab-content {
    transition: transform .1s cubic-bezier(0.165, 0.84, 0.44, 1) !important;
  }
  
  /* Tab closing/opening animations */
  .tabbrowser-tab:not([pinned],[fadein]){
    transition-duration: 0s, .3s !important;
    transition-timing-function: ease-out, ease-out !important;
    opacity: .5 !important;
    background-color: light-dark(rgba(255,255,255,.45),rgba(58,58,58,.225)) !important;
    animation: scale-out 140ms ease-out !important;
  }

  .tabbrowser-tab[fadein] .tab-background,
  .tabbrowser-tab[fadein] .tab-stack{
    animation: scale-in .2s ease-out !important;
  }
  .tabbrowser-tab[fadein] .tab-content {
    animation: opacity-in .5s ease-out !important;
  }

  .tab-content:not([fadein],[pinned])
  .tab-icon-pending:not([fadein]),
  .tab-icon-image:not([fadein]),
  .tab-label:not([fadein]){
    visibility: visible !important;
  }
  .tab-label:not([fadein]){
    display: flex !important;
  }

  @keyframes scale-out {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(.85);
    }
    100% {
      transform: scale(.5);
    }
  }
  @keyframes scale-in {
    0% {
      transform: scale(.5);
    }
    50% {
      transform: scale(.85);
    }
    100% {
      transform: scale(1);
    }
  }

  @keyframes opacity-in {
    0% {
      opacity: 0;
    }
    50% {
      opacity: .5;
    }
    100% {
      opacity: 1;
    }
  }
  
  /* Back/forward button bounce animations */
  #back-button {
    list-style-image: none !important;
  }

  #back-button::after {
    content: url('icons/back.svg') !important;
    position: absolute !important;
    margin-top: 4px !important;
    transition: transform .1s ease-out !important;
  }

  #back-button:not([disabled="true"]):active::after {
    animation: bounce-left .2s ease-out !important;
  }

  @keyframes bounce-left {
      0% {
          transform: translateX(0);
      }
      30% {
          transform: translateX(-3px);
      }
      60% {
          transform: translateX(0);
      }
      100% {
          transform: translateX(0);
      }
  }

  #forward-button {
    list-style-image: none !important;
  }

  #forward-button::after {
    content: url('icons/forward.svg') !important;
    position: absolute !important;
    margin-top: 4px !important;
    transition: transform .1s ease-out !important;
  }

  #forward-button:not([disabled="true"]):active::after {
    animation: bounce-right .2s ease-out !important;
  }

  @keyframes bounce-right {
      0% {
          transform: translateX(0);
      }
      30% {
          transform: translateX(3px);
      }
      60% {
          transform: translateX(0);
      }
      100% {
          transform: translateX(0);
      }
  }
  @media (-moz-bool-pref: "uc.winui.smaller-toolbar-buttons") {
    #forward-button::after, #back-button::after {
      scale: .85 !important;
    }
  }
  @media (-moz-bool-pref: "uc.winui.mac-back-forward") {
    #forward-button::after {
      content: url('winui-icons/forward-mac.svg') !important;
    }
    #back-button::after {
      content: url('winui-icons/back-mac.svg') !important;
    }
  }
  
  @media (prefers-color-scheme: dark) {
     /* Hovering tab animated */
    .tabbrowser-tab:not([selected]) .tab-background {
      background-color: transparent !important;
      box-shadow: 0 -000001px 0 rgba(255,255,255,.0000000000000000000000000001) inset !important;
      transition: box-shadow ease-in-out 83ms !important;
    }
    .tabbrowser-tab:not([selected]):hover .tab-background {
      background-color: transparent !important;
      box-shadow: 0 -36px 0 rgba(255,255,255,.0605) inset !important;
      transition: box-shadow ease-out 183ms !important;
    }
  }
  
  @media (prefers-color-scheme: light) {
    /* Hovering tab */
    .tab-background {
      .tabbrowser-tab:hover &:not([selected], [multiselected]) {
        #TabsToolbar:not([brighttext]) & {
          background-color: transparent !important;
        }
      }
    }

    /* Hovering tab animated */
    .tabbrowser-tab:not([selected]) .tab-background {
      background-color: transparent !important;
      box-shadow: 0 -000001px 0 rgba(0,0,0,.000000000000000001) inset !important;
      transition: box-shadow ease-in-out 83ms !important;
    }

    .tabbrowser-tab:not([selected]):hover .tab-background {
      background-color: transparent !important;
      box-shadow: 0 -36px 0 rgba(0,0,0,.03) inset !important;
      transition: box-shadow ease-out 183ms !important;
    }
  }
}

@media (-moz-bool-pref: "uc.winui.taller-bookmarks") {
  #PersonalToolbar {
    height: 42px !important;
    padding-inline: 6px !important;
    padding-block: 2px !important;
  }
  #personal-toolbar-empty-description, toolbarbutton.bookmark-item:not(.subviewbutton) {
    padding-inline: 7px !important;
    margin-block: 4px !important;
    margin-inline: 3px !important;
  }
}

@media (-moz-bool-pref: "uc.winui.macos-navbar-icons") {
  #back-button {
    list-style-image: url("winui-icons/back-mac.svg") !important;
  }
  #forward-button {
    list-style-image: url("winui-icons/forward-mac.svg") !important;
  }  
  #add-ons-button,
  #appMenu-extensions-themes-button,
  #unified-extensions-button,
  #unified-extensions-manage-extensions {
  list-style-image: url("winui-icons/extension-mac.svg") !important;
  }
  #PanelUI-menu-button,
  #appMenu-more-button2,
  .unified-extensions-item-menu-button {
    list-style-image: url("winui-icons/menu-mac.svg") !important;
  }
  .tab-icon-image[src="chrome://branding/content/icon32.png"],
  .tab-icon-image[src="chrome://browser/skin/privatebrowsing/favicon.svg"] {
    content: url("winui-icons/newtab-mac.svg") !important;
  }
  #downloads-button,
  #downloads-indicator-anchor,
  #appMenu-downloads-button,
  #appMenu-library-downloads-button {
  list-style-image: url("winui-icons/downloads-mac.svg") !important;
  }
  
  @media (-moz-bool-pref: "uc.winui.extra-animations") {
    #PanelUI-menu-button:hover > .toolbarbutton-badge-stack > .toolbarbutton-icon {
      transform: unset !important;
      transition: var(--basicBGAnimation) !important;
    }
    #PanelUI-menu-button:active > .toolbarbutton-badge-stack > .toolbarbutton-icon {
      transform: unset !important;
      transition: var(--basicBGAnimation) !important;
    }
    #PanelUI-menu-button > .toolbarbutton-badge-stack > .toolbarbutton-icon {
      transition: var(--basicBGAnimation) !important;
    }
    
    #back-button, #forward-button  {
      list-style-image: none !important;
    }
    #back-button::after {
      content: url("winui-icons/back-mac.svg") !important;
    }
    #forward-button::after {
      content: url("winui-icons/forward-mac.svg") !important;
    }
  }
}
